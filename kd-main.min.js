const KD_MAIN_JS_VERSION="2.0.0";function createEle(e,t){var n;if(e){if("string"==typeof e)n=document.createElement(e);else if("object"==typeof e&&e.tag){if(n=document.createElement(e.tag),e.id&&(n.id=e.id),e.class&&"string"==typeof e.class&&n.setAttribute("class",e.class),e.style&&"string"==typeof e.style&&n.setAttribute("style",e.style),e.type&&"string"==typeof e.type&&n.setAttribute("type",e.type),void 0!==e.dataset)if(Array.isArray(e.dataset))for(const t in e.dataset){let i=e.dataset[t];void 0!==i.key&&"string"==typeof i.key&&void 0!==i.value&&"string"==typeof i.value&&(n.dataset[i.key]=i.value)}else if("obejct"==typeof e.dataset){let t=e.dataset;void 0!==t.key&&"string"==typeof t.key&&void 0!==t.value&&"string"==typeof t.value&&(n.dataset[t.key]=t.value)}e.innerHTML&&"string"==typeof e.innerHTML&&(n.innerHTML=e.innerHTML),e.event&&e.event&&"object"==typeof e.event&&e.event.event&&"string"==typeof e.event.event&&e.event.function&&"function"==typeof e.event.function&&(e.event.capture||(e.event.capture=!1),n.addEventListener(e.event.event,e.event.function,e.event.capture)),1==e.disabled||1==e.disabled?n.disabled=!0:0!=e.disabled&&0!=e.disabled||(n.disabled=!1),void 0!==e.value&&(n.value=e.value),e.type&&(n.type=e.type),void 0!==e.placeholder&&(n.placeholder=e.placeholder),"input"==e.tag&&"checkbox"==e.type&&void 0!==e.checked&&(n.checked=e.checked),e.parent&&("string"==typeof e.parent&&document.getElementById(e.parent)?document.getElementById(e.parent).appendChild(n):isElement(e.parent)&&e.parent.appendChild(n)),e.children&&("string"==typeof e.children&&document.getElementById(e.children)?n.appendChild(document.getElementById(e.children)):isElement(e.children)&&n.appendChild(e.children))}return n}}function getElement(e){return document.getElementById(e)}function appendChild(e,t){e&&t&&(getElement(e)?pr=getElement(e):pr=e,getElement(t)?ch=getElement(t):ch=t,"body"==e?document.body.appendChild(ch):pr.appendChild(ch))}function removeChild(e){var t;t=getElement(e)?getElement(e):e,getElement(t).parentNode.removeChild(t)}function createFullEle(e,t,n,i,o="class"){let r=document.createElement(e.toString());if(t.toString()&&(r.id=t),"body"==n)document.body.appendChild(r);else if("head"==n)document.head.appendChild(r);else if(n)n.appendChild(r);else{if(!getElement(n))return void console.error('"createFullEle" failed!');getElement(n).appendChild(r)}return i&&r.setAttribute(o,i),r}function replaceID(e,t){getElement(e)?ori=getElement(e):ori=e,document.getElementById(ori).id=t}function getSceneDateFolder(){for(i=0;i<document.head.children.length;i++){var e=document.head.children[i];if(e.href){let t=e.href,n=e.rel;if(t.match(/favicon.ico/g)&&"icon"==n)return t.split("/favicon.ico")[0]+"/"}}}function getExtraAssetUrl(e){return getSceneDateFolder()+"extra-assets/"+e.toString()}function getParentUrl(){let e=null;if(parent!==window)try{e=parent.location.href}catch(t){e=document.referrer}return e}function checkIsMobile(){let e=0;return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(e=1),e}function loadCSS(e,t="head"){let n=createEle("link");n.rel="stylesheet",n.type="text/css",n.href=e,"head"==t?document.head.appendChild(n):"body"==t?document.body.appendChild(n):getElement(t)?getElement(t).appendChild(n):console.error(n+"load faild.")}function loadJS(e,t="head"){let n=document.createElement("script");n.type="text/javascript",n.src=e,"head"==t?document.head.appendChild(n):"body"==t?document.body.appendChild(n):getElement(t)?getElement(t).appendChild(n):console.error(e+"load faild.")}function gtag_data(e="vr_scene",t="",n=""){document.getElementById("gtag")&&gtag("event",t,{event_category:e,event_label:n})}function restrictDomain(){var e=[],t="vr.",n=".com",i=".io",o="dex",r="xr";return e.push("localhost",t+"kardiaworld"+n,"xr.kardiaverse"+n,t+"archimat"+i,t+o+"-"+r+n,t+o+NaN+i,t+o+r+i,t+"artitude.gallery","iddiy.kardiaverse.com"),e.includes(window.location.hostname)?1:0}function isValidUrl(e){try{return new URL(e),!0}catch(e){return!1}}function isNode(e){return"object"==typeof Node?e instanceof Node:e&&"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName}function isElement(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName}function openUrl(e,t){t=null==t?"":"_blank",window.open(t)}function openNewUrl(e){window.open(e,"_blank")}function decodeHtmlToJson(e){const t={"&":"&","\\":"\\","<":"<",">":">",'"':'"',"'":"'"};return e.replace(/([&<>\"'])/g,(e=>t[e]))}function removeHtmlScriptTag(e){return e.toString().replace(/\<script\>/gi,"").replace(/\<\/script\>/gi,"")}function decodeHTMLEntities(e,t=0){if(t){var n=document.createElement("textarea");return n.innerHTML=e,n.value}{const t={"&":"&amp;","\\":"&bsol;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;"};return e.toString().replace(/([&<>\"'])/g,(e=>t[e]))}}function encodeHTMLEntities(e){var t=document.createElement("textarea");return t.innerText=text,t.innerHTML}function sceneVideoPopUp(e,t){getElement("scene-video-label")?""!=getElement("scene-video-label").style.display&&(getElement("scene-video-label").style.display=""):(createFullEle("div","scene-video-label","body","ext-popup ext-html-label-animated"),getElement("scene-video-label").setAttribute("style","max-width:max-content; display:auto; top:0 ;bottom:0 ;left:0;right:0;"),createFullEle("div","scene-video","scene-video-label ext-popup-content"),getElement("scene-video").setAttribute("style","max-width:100vw; max-height:100vh; width:100vw; height:100vh;"),createFullEle("div","scene-video-cls","scene-video-label ext-popup-close-button-panel","ext-popup-close-button-panel"),getElement("scene-video-cls").style.position="absolute",getElement("scene-video-cls").style.top="0",getElement("scene-video-cls").style.right="0",createFullEle("div","scene-video-cls-icon","scene-video-cls ext-popup-close-button"),getElement("scene-video-cls").addEventListener("click",(()=>{"none"!=getElement("scene-video-label").style.display&&(getElement("scene-video-label").style.display="none",getElement("scene-video").innerHTML="")})));let n=getElement("play-button").src.replace("/webwalk/img/play.svg",""),i=encodeURI(t);var o=null;if("videoTexture"==e)o=`${n}/video/mp4/${i}.mp4`;else if("videoExtraAssets"==e)o=`${n}/extra-assets/${i}.mp4`;else if("videoLink"==e)o=i;let r=createEle("iframe");r.src=o,r.width="100%",r.height="100%",r.maxWidth="100%",r.maxHeight="100%",r.allow="autoplay",r.frameBorder="0",r.setAttribute("allowFullScreen",""),getElement("scene-video").appendChild(r)}function setTimeAutoSwitchView(e,t=1e4,n=1001,i){if(e){var o,r,a,l,s,d,c,p,u=0;kd=this.function.kd(),r=t,a=!0,l=o=e,p=n,s||(s=kd.getCameraPosition().x,d=kd.getCameraPosition().y,c=kd.getCameraPosition().z),window.setInterval((function(){!function(){a=s==kd.getCameraPosition().x&&d==kd.getCameraPosition().y&&c==kd.getCameraPosition().z;return a}()||l!=o?function(){u<r&&(u+=p);return u}()>=r&&(kd.switchToView(o),u=0):u=0;if(document.getElementById("timing-back-start")){var e=document.getElementById("timing-back-start"),n=(t/1e3-Math.round(u)/1e3).toFixed(0);e.innerHTML=`Click Back To Start. (Auto back after ${n}sec)`}}),p),document.addEventListener("keydown",(e=>{u=0}),!1),document.addEventListener("click",(e=>{u=0}),!1),document.addEventListener("mousemove",(e=>{u=0}),!1),kd.onViewSwitchDone((function(e,t){(l=e)==o&&(u=0)}));var m={time:t/1e3,view:e};if("function"==typeof i&&i(m),!i){var h=document.createElement("div");h.id="timing-back-start",h.setAttribute("class","menu-1-ui-hoverable"),h.innerHTML=`Click Back To Start. <span>(Auto back after ${m.time}sec)</span>`,document.body.appendChild(h);var f=document.createElement("style");f.innerHTML="\n            #timing-back-start {position: absolute;z-index: 102;top: 10px;left: 10px;overflow: hidden;background-color: var(--bg-clr-t-09, hsla(0,0%,100%,.9));box-shadow: var(--buttom-box-shadow, 0 0 0 1px rgb(0 0 0 / 10%));color: black;border-radius: 100px;padding: 11px 15px;line-height: 22px;font-weight: 700;cursor: pointer;max-width: calc(100% - 80px);display: flex;flex-wrap: wrap;}\n            ",document.body.appendChild(f),h.addEventListener("click",(()=>{viewer.switchToView(m.view)}))}}else console.error("'setTimeBackStartView' function parameters missing 'view' name.")}function insertHTML(e=""){var t,n,i,o,r;for(t=document.getElementsByTagName("*"),n=0;n<t.length;n++)if(o=(i=t[n]).getAttribute("w3-include-html"))return(r=new XMLHttpRequest).onreadystatechange=function(){4==this.readyState&&(200==this.status&&(i.innerHTML=this.responseText),404==this.status&&(i.innerHTML="Page not found."),i.removeAttribute("w3-include-html"),insertHTML())},r.open("GET",o,!1),void r.send()}function fullScreenBtn(e="",t="",n=""){createFullEle("div","fullscreen-btn",e);let i=getElement("fullscreen-btn");function o(){let e=document.body;(e.mozRequestFullScreen||e.webkitRequestFullscreen||e.msRequestFullscreen||e.requestFullscreen).call(e),i.addEventListener("click",r),i.removeEventListener("click",o)}function r(){document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozRequestFullScreen&&document.mozRequestFullScreen(),i.addEventListener("click",o),i.removeEventListener("click",r)}i.innerHTML=""==n?"<i class='fas fa-expand'></i>":n,""!=t&&i.setAttribute("class",t),i.addEventListener("click",o)}function oriGraphicSize(e,t){var n=[],i=getExtraAssetUrl(e);$.getJSON(i,(function(e){n=e;let t=document.createElement("div");t.id="artworks",t.style.display="none",document.body.appendChild(t),Object.entries(n).forEach((([e,n])=>{if("artwork"==e||"graphic"==e){let i=document.createElement("div");i.id="artwork"==e?"artworks-size":"graphic-size",i.style.display="none",document.body.appendChild(i),Object.entries(n).forEach((([e,n])=>{let o="art-no"in n?"art":"graphic",r="art"==o?"Artwork":"Graphic",a=n[`${o}-no`],l=(n[`${o}-type`],n[`${o}-width`]),s=n[`${o}-height`],d=document.createElement("canvas"),c=d.getContext("2d"),p=n.material;d.id=a+"_S",d.dataset.status="deactive",d.width=l,d.height=s,fs=60,c.font=`${fs}px Arial`,c.textAlign="center",c.rect(0,0,l,s),c.fillStyle="white",c.fill(),c.fillStyle="black",c.fillText(`${r} Code: ${a}`,l/2,s/2),c.fillText(`${r} Max-Size: ${l}W x ${s}H`,l/2,s/2+fs),i.appendChild(d),viewer.setMaterialEditable(p);let u=document.createElement("img");u.id=a,u.src=getExtraAssetUrl(p+".png"),u.dataset.status="active",u.crossOrigin="anonymous",t.appendChild(u)}))}}))}));let o=document.createElement("div");o.id="graphicSwitch",document.body.appendChild(o),btni=document.createRange().createContextualFragment('<div style="top: 0;"><span class="graphic-active">Graphic Sample</span><i id="gsbtn" class="fa-solid fa-toggle-off"></i><span class="graphic-deactive">Graphic Size</span></div>'),o.appendChild(btni);let r=document.createElement("style");if(r.type="text/css",r.innerHTML="\n  #graphicSwitch {\n    position: absolute;\n    z-index: 102;\n    top: 10px;\n    left: 50%;\n    transform: translate(-50%);\n    overflow: hidden;\n  }\n  #graphicSwitch > div {\n    display: flex;\n    align-items: center;\n    background-color: var(--bg-clr-t-09);\n    box-shadow: var(--buttom-box-shadow);\n    color: darkgrey;\n    border-radius: 100px;\n    padding: 0 15px;\n    position: relative;\n    transition: top 1s ease;\n  }\n  #graphicSwitch > div > span {\n    padding: 0 10px;\n    min-width: 150px;\n    text-align: center;\n  }\n  #graphicSwitch i {\n    font-size: 24px;\n    line-height: 44px;\n    padding-right: 2px;\n    color: black;\n  }\n  .graphic-active {\n    color: black;\n    font-weight: 700;\n  }\n  @media only screen and (max-width: 464px) {\n    #graphicSwitch > div > span:nth-child(1) {\n      order: 2;\n    }\n    #graphicSwitch > div > span:nth-child(3) {\n      order: 3;\n    }\n    #graphicSwitch > div > i:nth-child(2) {\n      order: 1;\n    }\n    .graphic-deactive {\n      display: none;\n    }\n  }\n  ",document.body.appendChild(r),o.addEventListener("click",(function(){let e=o.childNodes[0].childNodes[0],t=o.childNodes[0].childNodes[2],i=o.childNodes[0].childNodes[1],r="graphic-active",a="graphic-deactive";e.classList.contains(r)?(e.setAttribute("class",a),t.setAttribute("class",r),i.setAttribute("class","fa-solid fa-toggle-on")):(e.setAttribute("class",r),t.setAttribute("class",a),i.setAttribute("class","fa-solid fa-toggle-off")),0===n.length&&console.log("No graphic size details."),Object.entries(n).forEach((([e,t])=>{"artwork"!=e&&"graphic"!=e||n[e].forEach((function(t){let i="artwork"==e?"art-no":"graphic-no",o=t[i],r=(n.sceneCode+"-"+t[i]).toUpperCase(),a=document.getElementById(o+"_S"),l=viewer.findMaterial(r);document.getElementById("artworks");if("deactive"==a.dataset.status){var s=new WALK.Texture(a);a.dataset.status="active",s.width=a.width,s.height=a.height,s.hasAlpha=!0,s.minFilter=GLC.LINEAR,s.needsUpdate=!0,s.notifyLoaded()}else{a.dataset.status="deactive";var d=document.getElementById(o);d instanceof HTMLVideoElement?(s=viewer.createTextureFromHtmlVideo(d,hasAlpha=!0)).isCutout=!0:(s=viewer.createTextureFromHtmlImage(d,hasAlpha=!0)).isCutout=!0}l.baseColorTexture=s,viewer.requestFrame()}))}))})),getElement("menu-1-bar-folder")||getElement("menu-bar-folder")){let e=getElement("menu-bar-folder")?getElement("menu-bar-folder"):getElement("menu-1-bar-folder");"function"==typeof a.slide_on_off&&e.addEventListener("click",(()=>{a.slide_on_off(o.childNodes[0],"top")}))}var a={slide_on_off:function(e,t,n="",i="",o=""){if(isElement(e))var r=e;else r=getElement(e);let a=r.style;if("right"==t)var l=a.right,s=r.offsetWidth;else if("left"==t)l=a.left,s=r.offsetWidth;else if("top"==t)l=a.top,s=r.offsetHeight;else{if("bottom"!=t)return;l=a.bottom,s=r.offsetHeight}"0px"==l?(r.setAttribute("style",`${t}: -${s}px`),""!=n&&(getElement(n).style.pointerEvents="none"),""!=o&&getElement(i).classList.remove(o)):(r.setAttribute("style",`${t}: 0px`),""!=n&&(getElement(n).style.pointerEvents="auto"),""!=o&&getElement(i).classList.add(o))}}}!function(){!function(){if(restrictDomain())if(window.location.host.match(/localhost/g))window.KD_SCENE_VERSION=-1;else{var e=new XMLHttpRequest;e.open("GET",getSceneDateFolder()+"webwalk/VERSION",!1),e.send(null),200===e.status&&200===e.status&&(window.KD_SCENE_VERSION=e.responseText.replace(/(\r\n|\r|\n)/g,""))}}(),function(){if(restrictDomain()){var e=document.querySelectorAll("link"),t=!1;for(let i=0;i<e.length;i++){var n=e[i].href;if(n.match(/font-awesome/g)||n.match(/fontawesome/g)){t=!0;break}}if(!t){let e=document.createElement("link");e.rel="stylesheet",e.type="text/css",e.href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css",document.head.appendChild(e)}}}(),function(){if(restrictDomain()&&!window.jQuery){var e=new XMLHttpRequest;e.open("GET","https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js",!1),e.send(null),200===e.status&&new Function(e.responseText)()}}(),function(){const e={"localhost:5000":"KKG9JXVT",localhost:"KKG9JXVT","xr.kardiaverse.com":"P547GL9F","vr.archimat.io":"W2FM5F73","vr.dex-xr.com":"T6B9RT45","vr.artitude.gallery":"NN43545P"};!function(e,t,n,i,o){e[i]=e[i]||[],e[i].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var r=t.getElementsByTagName(n)[0],a=t.createElement(n);a.async=!0,a.src="https://www.googletagmanager.com/gtm.js?id="+o,r.parentNode.insertBefore(a,r)}(window,document,"script","dataLayer","GTM-"+e[window.location.host]),document.addEventListener("DOMContentLoaded",(function(t){let n=`\x3c!-- Google Tag Manager (noscript) --\x3e\n        <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-"${e[window.location.host]}\n        height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>\n        \x3c!-- End Google Tag Manager (noscript) --\x3e`;document.body.insertAdjacentHTML("afterbegin",n)}))}(),function(){if(restrictDomain()){var e,t,n="",i="";if("vr.dex-xr.com"==o()?(e="G-1QGD353PFB",t="G-HM1GF3XQ2C"):"vr.kardiaworld.com"==o()?(e="G-MK6DJH4W5T",t="G-F1ZZP4EZRJ"):"vr.archimat.io"==o()?e="G-R1T9YRXKZK":"xr.kardiaverse.com"==o()?(e="G-CJQWVVF2QD",t="G-0ZK9B86TNZ"):"vr.artitude.gallery"==o()&&(e="G-JE68KGGPG7",t="G-7LLNFKCN95"),t&&(n=`gtag('config', '${t}');`),e){let t=document.createElement("SCRIPT"),o=document.createElement("SCRIPT");t.id="gtag",t.type="text/javascript",t.src=`https://www.googletagmanager.com/gtag/js?id=${e}`,o.type="text/javascript",o.text=`\n                window.dataLayer = window.dataLayer || [];\n                function gtag(){dataLayer.push(arguments);}\n                gtag('js', new Date());\n                    \n                gtag('config', '${e}');\n                ${n}\n                ${i}`,document.head.appendChild(t),document.head.appendChild(o)}}function o(){return window.location.hostname}}();const e={setting:{version:"1.0.0",style:{defaultType:"style_1",run:0,style_1:{root:{textColor:"black",textBeforeHoverColor:"rgba(120, 120, 120, 1)",textHover:"black",infoBackgroundColor:"white",backgroundColor:"hsla(0, 0%, 100%, .9)",backdropFilter:"blur(7px)",borderColor:"lightgrey",boxShadow:"0 0 0 1px rgb(0 0 0 / 14%)",borderRadius:"15px",button_color:"rgba(120, 120, 120, 1)",button_hoverColor:"white",button_backgroundColor:"var(--backgroundColor)",button_backgroundHoverColor:"hsla(0, 0%, 0%, .7)",button_borderColor:"1px solid var(--textColor)",button_boxShadow:"0 0 0 1px rgb(0 0 0 / 10%)",button_bottomLine:"1px solid #adadad"},menu:':root {--menu_width: 400px;--menu_btn_h: 44px;--menu_btn_w: 44px;--menu_icon_size: 19px;--menu_icon_weight: 700;}::-webkit-scrollbar-thumb {border-radius: 4px;background-color: rgba(0, 0, 0, .5);box-shadow: 0 0 1px rgba(255, 255, 255, .5);-webkit-box-shadow: 0 0 1px rgba(255, 255, 255, .5);}::-webkit-scrollbar-thumb:hover {background-color: rgba(120, 120, 120, 1);}::-webkit-scrollbar {-webkit-appearance: none;height: 6px;width: 6px;}.menu-background {background-color: var(--backgroundColor);box-shadow: 0 -1px 40px 0 rgb(0 0 0 / 9%) !important;backdrop-filter: var(--backdropFilter);}#menu-bar {right: 50%;transform: translate(50%);bottom: 0;pointer-events: none;}#menu-bar-slide {right: unset !important;bottom: calc(0px - var(--menu-bar-height));transition: bottom 1s ease;display: flex;flex-direction: column;align-items: center;}#menu-bar-folder {min-width: 0px;width: var(--menu_btn_w);height: auto;padding: 3px 6px 3px 6px;font-size: 15px;line-height: 0px;border-radius: var(--borderRadius);color: var(--button_color);;}#menu-bar-folder>i {width: 100%;transition: transform 1s ease;transform: rotate(0deg);}.menu-item {margin: 0 4px;min-width: 0;width: var(--menu_btn_w);height: var(--menu_btn_h);line-height: var(--menu_btn_h);border-radius: 50%;background-color: var(--button_backgroundColor);box-shadow: var(--buttom_boxShadow);vertical-align: top;text-align: center;cursor: pointer;font-weight: var(--menu_icon_weight);font-size: var(--menu_icon_size);color: var(--button_color);padding: unset;overflow: hidden;}#author-logo {display: flex;align-items: center;}#author-logo>img {height: auto;max-height: 100%;max-width: 100%;}#menu_powered_by_info {color: var(--button_color);text-align: center;height: 26px;border-top: 1px solid lightgrey;padding: 5px 0px 0px 0px;margin-top: 5px;height: 20px;line-height: 1.5;white-space: nowrap;font-size: 13px;}#menu_powered_by_info a {color: var(--button_color) !important;}.menu-info-title {color: var(--button_color) !important;font-size: 14px !important;padding: 0 !important;overflow-wrap: anywhere;}.ui-hoverable:hover {background-color: var(--button_backgroundHoverColor) !important;color: var(--button_hoverColor) !important;}.ui-hoverable-active {background-color: var(--button_backgroundHoverColor) !important;color: var(--button_hoverColor) !important;}.ui-hoverable:active i {filter: drop-shadow(0 0 2px var(--button_hoverColor)) drop-shadow(0 0 5px var(--button_hoverColor)) drop-shadow(0 0 15px var(--button_hoverColor));}.ui-hoverable-2:hover {color: var(--textHover);transition: color 0.25s ease-out;}.ui-hoverable-2-active {color: var(--textHover);transition: color 0.25s ease-out;}#menu-bar-content {display: flex;flex-direction: column;align-content: center;justify-content: center;padding: 10px 10px;height: var(--menu-bar-height);border-radius: var(--borderRadius) var(--borderRadius) 0px 0px;width: 100%;pointer-events: auto;}#menu-buttons {width: 100%;display: flex;justify-content: space-between;align-items: center;list-style: none;width: var(--menu_width);}#menu-buttons>div.menu-item>img {padding: 12.5px;filter: invert(0.55);}#menu-buttons>div.menu-item> :hover {filter: invert(0);}#anchors-button>span {font-size: 18px;}#view-list-folder {display: none;}#view-list-items::-webkit-scrollbar-thumb {background-color: white;border-radius: 5px;border: 1px solid lightgrey;}#view-list-items::-webkit-scrollbar {background-color: lightgrey;box-shadow: 0 1px 3px 0 rgb(0 0 0 / 20%);width: 6px;border-radius: 5px;}.view {padding: 5px 0px 5px 5px;margin-top: 0px !important;white-space: normal !important;overflow: hidden;text-overflow: ellipsis;background-color: rgba(0, 0, 0, 0);cursor: pointer;border-bottom: 1px solid rgba(0, 0, 0, 0.085);font-weight: 400;}#view-list {position: static !important;float: left;}#view-list-slide {top: unset !important;padding: 10px;border-radius: var(--borderRadius);transition: all 1s ease;}#view-list-items {margin-top: 0px !important;margin-bottom: 0px !important;max-height: 180px !important;max-width: 160px !important;overflow-x: hidden !important;padding-right: 5px;}#view-list-items div {width: 100%;line-height: 15px;margin: 0px 0px 2px 0px;position: relative;}#view-list-items div::before {content: "";position: absolute;width: 0;height: 1px;bottom: 0;left: 0;background-color: black;transition: width 0.25s ease-out;}#view-list-items div:hover:before {width: 100%;}.menu-view-container {display: flex;align-items: flex-end;width: var(--menu_width);margin: 0px 0px 10px 0px;justify-content: center;color: var(--button_color);transition: justify-content 0.25s ease-out;}.menu-view-container>div {pointer-events: auto !important;}.menu-view-container.active {justify-content: space-between;}#tour-button {width: 100%;line-height: 15px;position: relative;text-align: center;padding: 10px 0px 0px 5px !important;border-bottom: none;}#desktop-help, #mobile-help {background-color: var(--backgroundColor);color: var(--button_color);border-radius: var(--borderRadius);box-shadow: var(--boxShadow);}#desktop-help-switch>div {border: 2px solid var(--button_color) !important;}#desktop-help-switch>div:hover {background-color: rgb(180, 180, 180) !important;color: white;}#desktop-help-switch>div.selected, #desktop-help-switch>div.selected:hover {background-color: rgb(122, 122, 122) !important;color: white;}#desktop-help img, #mobile-help img {filter: grayscale(100%) invert(1);}.active-view, .active-view:hover {background-color: var(--button_color) !important;color: white;}.next-active-view, .next-active-view:hover {background-color: var(--button_backgroundHoverColor) !important;color: white;}.ext-popup {top: 0;left: 0;bottom: 0;right: 0;}#ext-html-label-content {background: var(--backgroundColor, rgba(0, 0, 0, 0.8)) !important;color: var(--textBeforeHoverColor, white);padding-top: 38px;height: 100%;width: 100vw;max-height: 100vh;max-width: 100vw;overflow-wrap: break-word;overflow-y: auto;overflow-x: hidden;}#ext-html-label-content video, #ext-html-label-content iframe {width: 100%;height: 100%;max-height: calc(100% - 4px);}#ext-html-label-content img, #ext-html-label-content video {max-width: 100%;}#ext-html-label-close {position: absolute;top: 0;right: 0;color: var(--textBeforeHoverColor, white);display: flex;justify-content: flex-end;padding: 10px 15px;background-color: transparent;margin-left: 0;}.ext-popup-close-button {filter: invert(100%);}#info-text {height: unset;padding: 10px;background-color: var(--backgroundColor, rgba(255, 255, 255, 0.8));border-radius: calc(var(--borderRadius) / 2);}#info-title {color: var(--button_color);}@media only screen and (max-width: 450px) {:root {--menu_width: 100%;--side_menu_width: 100%;}#menu-bar {width: var(--menu_width);}#menu-bar-content {border-radius: 0px;}#menu-view-container {width: calc(var(--menu_width) - 15px) }}@media only screen and (max-width: 639px), (max-height: 639px) {.info-item {min-width: 60px !important;height: 60px !important;}}',sideMenu:'#side-menu {--side_menu_width: 400px;--text_border_bottom: 1px solid #ddd;--sb_info_div_paddding: 1rem 1.25rem;--sb_info_divInfo_paddding: 1.5rem;--border_bottom: 1px solid rgba(0, 0, 0, 0.085);}#side-menu {z-index: 103;position: absolute;top: 0;bottom: 0;right: 0;overflow: hidden;color: var(--textBeforeHoverColor);text-transform: uppercase;pointer-events: none;}#side-menu>div {pointer-events: auto;}.side-menu-slide {position: fixed;height: 100%;width: var(--side_menu_width);transition: right 1s ease;background-color: var(--infoBackgroundColor,white);display: flex;flex-direction: column;align-items: flex-start;}.side-menu-header {text-align: center;padding: 15px 20px;height: 95px;width: 100%;border-bottom: var(--border_bottom);display: flex;justify-content: center;}#side-menu-logo {height: 100%;}.side-menu-body {overflow: auto;padding: 15px 20px;height: calc(100% - 95px - 64px);width: 100%;}.side-menu-body>div {width: 100%;height: auto;font-size: 16px;line-height: 44px;margin: 0px 0px 10px 0px;vertical-align: top;text-align: left;cursor: pointer;position: relative;border-bottom: var(--text_border_bottom);padding: 13px 6px 13px 6px;}.side-menu-body>div::before {content: "";position: absolute;width: 0;height: 1px;bottom: 0;left: 0;background-color: black;transition: width 0.25s ease-out;}.side-menu-body>div:hover::before {width: 100%;}.side-menu-footer {padding: 10px 20px;height: 64px;width: 100%;background: lightgrey;align-items: center;display: flex;justify-content: space-between;}.side-menu-powered-by {padding-right: 15px;font-size: 12px;color: rgb(90, 90, 90);text-transform: uppercase;}#ctm-disclaimer {z-index: 200;position: absolute;padding: var(--sb_info_div_paddding);padding-right: 15px;width: 100%;max-width: 80%;max-height: 80%;margin: 2.5vh auto;top: 50%;left: 50%;transform: translateX(-50%) translateY(-50%);background-color: white;border-radius: var(--borderRadius);box-shadow: var(--boxShadow);}#ctm-disclaimer-header {color: black;width: 100%;padding: 10px 0px 20px 0px;}#ctm-disclaimer-tittle {display: inline;font-size: 24px;font-weight: 700;text-transform: uppercase;}#ctm-disclaimer-content {overflow: auto;overflow-wrap: break-word;}#ctm-disclaimer-info {color: var(--button_color);font-size: 14px;max-height: 500px;padding: 0px 10px 0px 0px;}#ctm-disclaimer::-webkit-scrollbar {background-color: lightgrey;box-shadow: 0 1px 3px 0 rgb(0 0 0 / 20%);width: 6px;border-radius: 5px;}#side-menu-info {background-color: white;}.side-menu-info-header {display: flex;align-items: center;width: 100%;padding: var(--sb_info_div_paddding);border-bottom: var(--text_border_bottom);}.side-menu-info-header > .title {flex: 1;font-weight: 700;}.side-menu-info-body {display: flex;flex-direction: column;width: 100%;height: 100%;padding: var(--sb_info_div_paddding);overflow: auto;text-transform: none;}#brand-info, #basicInfo, #social-media {padding: 0px !important;width: 100%;margin-bottom: 1.5rem;box-shadow: var(--boxShadow);border-radius: var(--borderRadius);}#basicInfo div {padding: var(--sb_info_div_paddding);}#basicInfo div div {padding: 0px !important;}#basicInfo div div:hover {color: black;}.basicInfo-info-icon i {flex: 0 0 30px;margin-right: 15px;width: 30px;height: 30px;text-align: center;border-radius: 50%;line-height: 30px;box-shadow: var(--buttom_boxShadow);}.basicInfo-info-icon a {text-decoration: none;color: inherit;}.text-brd-btm-clr {border-bottom: var(--text_border_bottom) !important;}.pd-mg-btm-1 {padding-bottom: 0.5rem;margin-bottom: 0.5rem;}.basicInfo-info-content {font-size: 14px;font-weight: 500;display: flex;align-items: center;padding-bottom: 0.5rem;margin-bottom: 0.5rem;line-height: 16px;}#google-map {position: relative;padding: 100% 0px 0px 0px !important;box-shadow: none !important;border-radius: 0px !important;border-bottom: var(--border_bottom);}#google-map iframe {position: absolute;top: 0;left: 0;bottom: 0;right: 0;}#social-media, #brand-info {display: flex;justify-content: space-around;align-items: center;padding: var(--sb_info_divInfo_paddding) !important;}#social-media div {padding: 0px !important;cursor: pointer;text-decoration: none;}#social-media div i:hover {color: var(--textHover);}#social-media div i {width: var(--menu_btn_w, 44px);height: var(--menu_btn_h, 44px);text-align: center;border-radius: 50%;line-height: var(--menu_btn_h);box-shadow: var(--buttom_boxShadow);font-size: var(--menu_icon_size);font-weight: var(--menu_icon_weight);}#brand-info {justify-content: normal !important;}#brand-logo {width: 35%;margin-right: 15px;text-align: center;padding-right: 10px;}',infoPanel:'#info-panel{ --max-height: 75vh; --empty-space: 20px; --cls-btm: 20px; --item-padding-top: 30px; --item-padding-bottom: 24px; --item-padding-left: var(--item-padding-bottom); --item-padding-right: calc(var(--item-padding-bottom) - (var(--scrollbar-w) + var(--scrollbar-left))); --scrollbar-w: 3px; --scrollbar-left: 16px; } .info-main ::-webkit-scrollbar { width: var(--scrollbar-w); } .info-main ::-webkit-scrollbar-track { border-radius: 10px; } .info-main ::-webkit-scrollbar-thumb { background-color: darkgrey; border-radius: 10px; } .info-main ::-webkit-scrollbar-thumb:hover { background: black; } .info-panel { z-index: 102; position: absolute; left: 25px; top: 50%; transform: translateY(-50%) scale(1); transition: opacity .35s ease-out; } .info-panel::before { display: none; } .info-main { position: relative; background: var(--infoBackgroundColor, white); border-radius: var(--borderRadius); backdrop-filter: var(--backdropFilter); border: 1px solid var(--borderColor, lightgrey); box-shadow: var(--boxShadow); color: var(--textColor); padding: var(--item-padding-top) var(--item-padding-right) var(--item-padding-bottom) var(--item-padding-left); transition: all .35s ease-out; } .info-panel-moveable { display: none; } .info-close { position: absolute; right: 8px; top: 8px; color: var(--textColor, black); cursor: pointer; text-align: center; width: var(--cls-btm); height: var(--cls-btm); line-height: var(--cls-btm); font-size: var(--cls-btm); } .info-content { padding-right: var(--scrollbar-left); max-height: calc(var(--max-height) - var(--item-padding-top) - var(--item-padding-bottom)); width: 400px; overflow-wrap: break-word; overflow-y: auto; overflow-x: hidden; } .info-table>tbody>tr>td:first-child { font-weight: 700; padding: 5px 40px 5px 0px; } .info-dropdown-toggle { background: none; border: none; width: 100%; text-align: left; padding: 0; font-size: 16px; } .info-dropdown-toggle { display: flex; justify-content: space-between; align-items: center; font-weight: 700; padding: 8px 0; border-bottom: var(--button_bottomLine, 1px solid lightgrey); color: var(--textColor); } .info-dropdown-toggle::after { font-family: "Font Awesome 6 Free"; font-weight: 700; content: "\\f107"; transform: rotate(0deg); transition: all .3s; } .info-dropdown-toggle.active::after { transform: rotate(180deg); } .info-dropdown-toggle+div { max-height: 0; overflow: hidden; transition: all .35s ease-out; overflow-y: auto; background: rgba(0, 0, 0, 0.03); } .info-dropdown-toggle.active+div { max-height: 100vh; transition: all .35s ease-in; } .info-dropdown-toggle+div>div { padding: 10px; } .info-cta { display: flex; flex-wrap: wrap; } .info-cta>div { flex: 0 0 50%; } .info-cta>div>* { text-decoration: none; color: var(--textColor); } .info-cta>div:only-child, .info-cta>div:last-child:nth-child(odd) { flex: 0 0 100%; } .info-cta-btn { display: flex; align-items: center; border: var(--button_borderColor,lightgrey); border-radius: 2px; justify-content: center; text-decoration: none; padding: 0.5em; min-width: 50%; cursor: pointer; text-align: center; transition: all .3s; margin: 5px; word-break: break-all; background-color: var(--button_backgroundColor); } .info-cta-btn:hover { color: var(--button_hoverColor, white); background: var(--button_backgroundHoverColor); } .item-previous-next { margin-top: 25px; display: flex; justify-content: space-between; } .item-previous-next>div { flex: unset !important; cursor: pointer; } .item-previous-next>div:hover { text-shadow: 0 0 15px rgb(120 120 120); } .previous::before { font-family: "Font Awesome 6 Free"; font-weight: 700; content: "\\f104"; margin-right: 15px; } .next { text-align: right; } .next::after { font-family: "Font Awesome 6 Free"; font-weight: 700; content: "\\f105"; margin-left: 15px; } .info-table, .info-dropdown, .info-cta { margin-bottom: var(--empty-space); } .info-template { display: none; position: absolute; height: 0; overflow: hidden; pointer-events: none; } @media only screen and (max-width: 450px) { .info-panel { left: 0; right: 0; bottom: 0; top: unset; transform: unset; } .info-main { max-height: 100%; height: 300px; max-width: 100vw; width: 100%; border-radius: var(--border-radius) var(--border-radius) 0 0; } .info-panel-moveable { display: unset; position: absolute; top: 0; left: 0; width: calc(100% - 32px); height: 22px; cursor: pointer; } .info-panel-moveable::before { content: ""; height: 4px; position: absolute; width: 150px; background: lightgray; left: 50%; transform: translateX(calc(-50% + (32px / 2))); top: 11px; border-radius: 50px; border: 1px solid #c5c5c5; } .info-panel-moveable:hover::before { content: ""; background: black; } .info-content { width: 100%; max-height: 100%; } .info-panel::before { font-family: "Font Awesome 6 Free"; font-weight: 700; content: "\\f00d"; position: absolute; bottom: 0; font-size: var(--beforeFontSize, 25px); line-height: 60px; background: #212121; border-radius: var(--border-radius) var(--border-radius) 0 0; color: #565454; width: 100%; height: var(--beforeHeight, 122px); transition: all .3s; left: 50%; transform: translateX(-50%); text-align: center; display: unset; } .info-back { position: absolute; top: 0; left: 0; right: 0; bottom: 0; pointer-events: none; } }',shareButton:'#share-container {z-index: 102;position: absolute;overflow: hidden;right: 10px;top: 10px;}#share-container-slide {top: 0px;position: relative;display: flex;font-size: var(--menu_icon_size);font-weight: var(--menu_icon_weight);flex-direction: column;align-items: flex-end;transition: top 1s ease;}#share-container-slide>div {pointer-events: auto;backdrop-filter: var(--backdropFilter);}#share-menu {display: flex;flex-direction: column;align-items: flex-end;height: auto;margin-top: 10px;border-radius: var(--borderRadius);background-color: var(--backgroundColor);transition: height 0.25s ease-in-out;}#share-menu button {color: var(--button_color);display: flex;flex-direction: row;min-width: 190px;border: none;outline: none;background-color: transparent;padding: 20px;justify-content: space-between;align-items: center;pointer-events: inherit;cursor: pointer;position: relative;}#share-menu button {width: var(--menu_btn_w);height: var(--menu_btn_h);line-height: var(--menu_btn_h);text-transform: uppercase;}#share-menu button:hover {color: var(--textHover);}#share-menu button::before {content: "";position: absolute;width: 0;height: 1px;bottom: 0;left: 0;background-color: black;transition: width 0.25s ease-out;}#share-menu button:hover::before {width: 100%;}#share-menu button:last-child::before {margin-left: var(--borderRadius);}#share-menu button:last-child:hover::before {width: calc(100% - (var(--borderRadius)*2));}#share-menu button i {font-weight: var(--menu_icon_weight);font-size: var(--menu_icon_size);}',floatingSocialChat:".socialChat {z-index: 102;position: absolute;right: 10px;bottom: 10px;overflow: hidden;pointer-events: none;}.socialChatSlide{position: relative;right: 0;display: flex;flex-direction: column;align-items: flex-end;transition: all 1s ease;}.socialChatSlide>div{backdrop-filter: var(--backdropFilter);}.socialChatBtm {width: var(--menu_btn_w, 44px);height: var(--menu_btn_h, 44px);line-height: var(--menu_btn_h, 44px);border-radius: 50%;background-color: var(--backgroundColor, hsla(0,0%,100%,.9));box-shadow: var(--buttom_boxShadow, 0 0 0 1px rgb(0 0 0 / 10%));vertical-align: top;text-align: center;cursor: pointer;font-weight: var(--menu_icon_weight, 700);font-size: var(--menu_icon_size, 19px);color: var(--button_color, darkgrey);pointer-events: auto;}.socialChatNoti {position: absolute;bottom: 22px;right: 5px;width: 15px;height: 15px;line-height: 15px;font-size: 10px;font-weight: 900;color: white;background: red;border-radius: 100%;}.socialChatPopup {margin-bottom: 10px;background-color: var(--backgroundColor, white);border-radius: var(--borderRadius);color: var(--textBeforeHoverColor);pointer-events: auto;max-width: 280px;display: none;}.socialChatPopup.active {display: unset;}.socialChatPopup > div {padding: 10px;}.socialChatPopup > div:first-child {display: flex;justify-content: space-between;flex-wrap: wrap;border-bottom: solid 1px #d1d1d1;}.socialChatPopup > div:first-child > div {display: flex;flex-wrap: wrap;}.socialChatCls {width: 20px;height: 20px;font-size: 14px;line-height: 20px;font-weight: 900;color: black;background: lightgrey;border-radius: 20px;text-align: center;cursor: pointer;}.socialChatCls:hover {color: white;background-color: black;}.socialChatFace {width: 40px;height: 40px;line-height: 40px;font-weight: 700;border-radius: 50px;background: lightgrey;background-image: url(https://media.istockphoto.com/id/1331061602/es/foto/los-operadores-est%C3%A1n-trabajando-en-el-centro-de-llamadas.jpg?s=612x612&w=0&k=20&c=pgF5mt3Jag_x0fKI_AuNZsIB27X7ozJIWILRHeIiZNs=);background-size: cover;justify-content: center;border: 2px solid lightgreen;}.socialChatApp {margin-top: 5px;display: flex;flex-wrap: wrap;justify-content: center;}.socialChatApp i {font-size: 30px;margin: 5px 7px;color: var(--textBeforeHoverColor, darkgrey);}.socialChatApp i.fa-facebook-messenger:hover {color: #00B2FF;}.socialChatApp i.fa-whatsapp:hover {color: #25D366;}.socialChatApp i.fa-telegram:hover {color: #0088cc;}.socialChatApp i.fa-weixin:hover {color: #09B83E;}.socialChatApp i.fa-line:hover {color: #00c300;}.socialChatApp i.fa-envelope:hover {color: black;}@media only screen and (max-width: 280px) {.socialChatPopup {margin-left: 10px;}}"},style_2:{}},widget:[],closeUXUI:{OpenClose:0,menuClose:{}},content:{shortPoweredContent:'VR Scene Powered By <u><a href="https://www.kardiaworld.com/" target="blank" style="color:black; text-decoration:none">Kardia</a></u>.',copyright:"Copyright 2022. All Rights Reserved.",title:{"music-button":"On/off Background music.","view-list-button":"Change to other view.","anchors-button":"Hide/show triggers.","fullscreen-button":"Fullscreen button.",moreInfo:"Side menu and more information.","menu-bar-folder":"On/off menu bar.",".socialChatBtm":"Contact us!","btn-share":"Share link button."}},events:{windowLoad:{},sceneReady:{},sceneComplete:{}},scene:{material:{texture:[]},extensions:[],extensionsNode:[],triggerStatus:{},viewStatus:{view:null,tour:0,changeViewExtensions:{},tourExtensionName:null,tourProcess:[]}}},menu:{run(){var e=this.setting.widget,t=this.setting.closeUXUI.OpenClose;if(-1!=e.indexOf("menu"))return;e.push("menu");let n=()=>{let e=this.function.kd(),n=getElement("view-list");lg=getElement("engine-logo"),mb=getElement("menu-bar"),mbf=getElement("menu-bar-folder"),e.onSceneReadyToDisplay((()=>{if(setTimeout((()=>{!function(){let e=getElement("menu-buttons").children;for(let n=0;n<e.length;n++)if(""===e[n].id){var t=e[n].children[0];if(t&&t.src)if(t.src.match(/img\/audio/g)){e[n].id="music-button";let i=getElement("music-button"),o='<i class="fas fa-volume-up"></i>',r='<i class="fa-solid fa-volume-xmark"></i>';t.src.match(/audio-on/g)?i.innerHTML=o:i.innerHTML=r,i.addEventListener("click",(()=>{i.innerHTML==o?i.innerHTML=r:i.innerHTML=o}))}else if(t.src.match(/img\/anchors/g)){e[n].id="anchors-button";let i=getElement("anchors-button"),o="<span>CTA</span>",r='<span style="text-decoration: 2px line-through;">CTA</span>';t.src.match(/anchors-on/g)?i.innerHTML=o:i.innerHTML=r,i.addEventListener("click",(()=>{i.innerHTML==o?i.innerHTML=r:i.innerHTML=o}))}}}()}),10),mb.style.display=null,n.style.display=null,mbf.dataset.openClose=t,mbf.addEventListener("click",(()=>{t=t?0:1})),lg.href.match(/apespa/g)&&(lg.href="javascript:void(0)",lg.children[1].remove(),lg.style.display="none"),document.querySelector(".side-menu-header")&&getElement("author-logo")){let e=document.querySelector(".side-menu-header"),t=getElement("author-logo");e.appendChild(t),""!=t.children[0].src&&(e.style.display=null)}}))};"loading"==document.readyState?window.addEventListener("DOMContentLoaded",n):n()},style_1(e){let t=this,n=t.function.kd();if(t.setting.style.defaultType=arguments.callee.name,e)return;t.menuStructureStart(),n.onSceneReadyToDisplay((()=>{setTimeout((()=>{(function(){o.classList.add("menu-view-container"),r.prepend(o),o.appendChild(a),o.appendChild(c),s.remove(),m.innerHTML="Auto Change View",m.classList.remove("menu-item"),m.classList.remove("ui-hoverable"),m.classList.remove("menu-button"),m.classList.add("view"),m.classList.add("ui-hoverable-2"),u.insertBefore(h,u.firstChild),h.id="view-list-button",h.innerHTML='<i class="fas fa-street-view"></i>',h.setAttribute("class","ui-hoverable ui-panel menu-button menu-item"),d.appendChild(m),d.style.bottom=-d.offsetHeight+"px",d.dataset.height=d.offsetHeight,d.style.display="none",d.classList.add("menu-background"),c.innerHTML='<i class="fas fa-caret-down"></i>',c.classList.add("menu-background"),p.classList.add("menu-background"),getElement("fullscreen-button").innerHTML='<i class="fas fa-expand"></i>';for(let e=0;e<l.children.length;e++)l.children[e].classList.remove("ui-hoverable"),l.children[e].classList.add("ui-hoverable-2");t.setting.closeUXUI.OpenClose||(r.style.bottom=-p.offsetHeight+"px",document.querySelector("#menu-bar-folder>i").setAttribute("class","fas fa-caret-up"));t.function.sliding.slideBottom(c,r,p),c.addEventListener("click",(()=>{"open"==i&&f()})),h.addEventListener("click",f),getElement("menu-bar-slide").style.visibility="",getElement("menu-bar-slide").style.pointerEvents=""})(),t.menuStructureEnd()}),10)}));let i,o=createEle("div"),r=getElement("menu-bar-slide"),a=getElement("view-list"),l=getElement("view-list-items"),s=getElement("view-list-folder"),d=getElement("view-list-slide"),c=getElement("menu-bar-folder"),p=getElement("menu-bar-content"),u=getElement("menu-buttons"),m=(getElement("anchors-button"),getElement("tour-button")),h=(getElement("help-button"),createEle("div"));getElement("menu-bar-slide").style.visibility="hidden",getElement("menu-bar-slide").style.pointerEvents="none",p.appendChild(t.powered_by());var f=()=>{let e=parseInt(d.dataset.height);""==d.style.bottom||"0px"==d.style.bottom?(t.function.sliding.slideBottom(0,d,e),i="close",setTimeout((()=>{"close"==i&&d.style.bottom==-e+"px"&&(document.querySelector(".menu-view-container").classList.remove("active"),d.style.display="none")}),1100)):(i="open",document.querySelector(".menu-view-container").classList.add("active"),d.style.display=null,setTimeout((()=>{"open"!=i||d.style.display||t.function.sliding.slideBottom(0,d,e)}),100))}},style_2(e){let t=this,n=t.function.kd();this.setting.stype.defaultType=arguments.callee.name,e||(t.menuStructureStart(),n.onSceneLoadComplete((function(){t.menuStructureEnd()})))},menuStructureStart(){this.multiRun(),this.setting.style.run=!0},menuStructureEnd(e){},multiRun(){this.setting.style.run&&console.error("Error: This menu function have runing duplicate, please remove the second function")},addButton(e,t){let n=createEle("div"),i=e.includes("</i>");if(p=getElement("menu-buttons"),a=createEle("a"),e&&t){if(n.setAttribute("class","menu-button menu-item ui-hoverable ui-panel"),getElement("moreInfo")?getElement("moreInfo").parentNode.insertBefore(o,getElement("moreInfo")):p.appendChild(n),i)n.appendChild(e);else if(e.includes("jpg")||e.includes("png")||e.includes("svg")){var o=createEle("img");n.appendChild(o),o.src=e}else"string"==typeof e&&(n.innerHTML=e);return t?(t&&"function"==typeof t?n.addEventListener("click",t):t&&"string"==typeof t&&t.match(/http/g)?n.addEventListener("click",(()=>{window.open(t)})):console.error("Button error."),n):n}console.log("Add button failed.")},powered_by(e=this.setting.content.shortPoweredContent){var t=createEle("div");return t.id="menu_powered_by_info",t.innerHTML=e,t}},sideMenu:{run(){var e=this.setting.widget;if(-1!=e.indexOf("sideMenu"))return;e.push("sideMenu");let t=()=>{this.parent;var e=`\n                    <div id="side-menu">\n                      <div id="side-menu-main" class="side-menu-slide" style="right: calc(0px - var(--side_menu_width));">\n                        <div class="side-menu-header" style="display: none;"></div>\n                        <div class="side-menu-body" style="height: 100%;"></div>\n                        <div class="side-menu-footer">\n                          <div class="side-menu-powered-by">${this.setting.content.shortPoweredContent}<br>${this.setting.content.copyright}</div>\n                          <div class="side-menu-cls menu-item ui-hoverable"><i class="fas fa-times"></i></div>\n                        </div>\n                      </div>\n                      <div id="side-menu-info" class="side-menu-slide" style="right: calc(0px - var(--side_menu_width));">\n                        <div class="side-menu-info-header">\n                            <div class="title"></div>\n                            <div class="menu-item ui-hoverable close"><i class="fas fa-times"></i></div>\n                        </div>  \n                        <div class="side-menu-info-body" style="height: 100%;"></div>\n                      </div>\n                    </div>\n                    `;document.body.insertAdjacentHTML("beforeend",e);var t=document.querySelector(".side-menu-info-header > div.close"),n=getElement("side-menu-info");t.addEventListener("click",(()=>{n.style.right!=-n.offsetWidth+"px"&&(n.style.right=-n.offsetWidth+"px")}))};"loading"==document.readyState?window.addEventListener("DOMContentLoaded",t):t()},style_1(){var e=this,t=getElement("help-button"),n=createEle("div"),i=getElement("side-menu-main"),o=document.querySelector(".side-menu-cls");n.id="moreInfo",getElement("menu-buttons").appendChild(n),n.setAttribute("class","menu-item ui-hoverable ui-panel"),n.innerHTML='<i class="fas fa-bars"></i>',document.querySelector("#side-menu-main > div.side-menu-body").appendChild(t),t.innerHTML="How To Navigate",t.classList.remove("ui-panel"),t.classList.remove("menu-item"),t.classList.remove("ui-hoverable"),t.classList.add("ui-hoverable-2"),this.setting.events.sideMenu=()=>{e.function.sliding.slideRight(n,i)},this.setting.events.sideMenuCls=()=>{e.function.sliding.slideRight(o,i)}},addButton(e,t){var n="sideMenu"+e;n in this.setting.events&&(n+=Math.floor(Math.random())),this.function.addAction((()=>{var n=document.querySelector(".side-menu-body"),i=createEle("div"),o=getElement("side-menu-info");i.setAttribute("class","menu-button ui-hoverable-2"),i.innerHTML=e.toString(),i.dataset.smBtn="btnName.toString()",n.prepend(i),i.addEventListener("click",(()=>{this.setting.content(e,t)})),this.function.sliding.slideRight(i,o)}),3)},content(e,t){getElement("side-menu-info");var n=document.querySelector(".side-menu-info-header > div.title"),i=document.querySelector(".side-menu-info-body");n.innerHTML=e.toString(),i.innerHTML=this.filterContent(t.toString())},filterContent(e){var t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText||""},add(){var e=this.setting.widget;-1==e.indexOf("sideMenu")&&e.push("sideMenu")},remove(){var e=this.setting.widget;e.indexOf("sideMenu")>-1&&delete e[e.indexOf("sideMenu")]}},infoPanel:{run(){var e=this.setting.widget;if(-1!=e.indexOf("infoPanel"))return;e.push("infoPanel");let t=()=>{document.body.insertAdjacentHTML("beforeend",'\n                    <div id="info-panel" class="info-panel" style="display:none;">\n                        <div class="info-main">\n                            <div class="info-panel-moveable"></div>\n                            <div class="info-content"></div>\n                        </div>\n                        <div class="info-close"><i class="fa-solid fa-xmark"></i></div>\n                        <div class="info-template"></div>\n                    </div>\n                    <div class="info-back"></div>'),document.querySelector(".info-close").addEventListener("click",(()=>{this.panelClose()}))};"loading"==document.readyState?window.addEventListener("DOMContentLoaded",t):t()},style_1(){document.querySelector('[data-css="infoPanel"]')||(style=document.createElement("style"),document.body.appendChild(this.setting.style.style_1.infoPanel),style.id=i,style.type="text/css",style.textContent=css)},content(e){const t=()=>{var t="content",n="type";if(e)if("object"==typeof e){if(!e[n]||"InfoPanel"!==e[n]||!e[t])return void console.error('"Info Panel" content format wrong.');e.template?this._info.contentTemplate(e):this.info(e[t])}else"string"==typeof e&&(this.panelOpen(),document.querySelector(".info-content").innerHTML=decodeHTMLEntities(e));else console.error("Missing parameter")};"loading"==document.readyState?this.function.addAction(t):t()},info(e){var t=document.getElementById("info-panel");if(Object.keys(e).length){"none"!=t.style.display&&(t.style.display="none"),this.panelOpen(),this._info._loadInfo(e);var n=document.querySelector(".info-panel-moveable"),i=document.querySelector(".info-panel"),o=document.querySelector(".info-back");this.upDowndragElement(n,i,o)}else console.error("Missing information!")},_info:{infoPanelEvent:{},_loadInfo(e,t){var n,i="type",o="info",r="title",a=this.function.kd();if(this.infoPanelEvent={},Array.isArray(e))for(let[d,c]of Object.entries(e)){let p=this.convertFunctionName(c[i]);`_${p}`in this?(c[i]==r&&this.arrGotKeyValue(c,o)&&!n&&(this[`_${p}`](c[o],t),n=1),c[i]!=r&&this.arrGotKeyValue(c,o)&&this[`_${p}`](c[o],t),"_space"!=c[i]&&"height"in c&&this[`_${p}`](c.height,t)):console.error(`Info no this function '${p}' to show content`)}else console.error("Info panel info wrong. Please check again.");for(let[u,m]of Object.entries(this.infoPanelEvent)){var l=document.querySelector(`[data-info-panel-btn="${u}"]`);function s(e){return`\n                            <iframe src="${e}" \n                            style="border:0px #ffffff none;" name="Kardia" scrolling="yes" \n                            frameborder="1" marginheight="0px" marginwidth="0px" height="100%" \n                            width="100%" allowfullscreen></iframe>\n                            `}l&&l.addEventListener("click",(function(){a.openPopup(s(m))}))}this.infoPanelEvent={}},_title(e){var t="",n="type",i="info";if(e&&""!=e)if(Array.isArray(e)){for(var o=0;o<e.length;o++)if(e[o][n]&&"title"==e[o][n]&&this.arrGotKeyValue(e[o],i)){t+=`<h1>${decodeHTMLEntities(e[o][i])}</h1>`,document.querySelector(".info-content").insertAdjacentHTML("beforeend",t);break}}else"string"==typeof e&&(t+=`<h1>${decodeHTMLEntities(e)}</h1>`,document.querySelector(".info-content").insertAdjacentHTML("beforeend",t))},_paragraph(e,t){var n;if(e&&""!=e){n=t&&isElement(t)?t:document.querySelector(".info-content");for(let[t,i]of Object.entries(e)){let o=document.createElement("p");this.arrGotKeyValue(e,t)&&n.appendChild(o),o.innerHTML=decodeHTMLEntities(i)}}},_listInfo(e,t){if(e&&""!=e){var n="",i=document.createElement("table");if((t&&isElement(t)?t:document.querySelector(".info-content")).appendChild(i),i.classList.add("info-table"),Array.isArray(e))e.forEach((e=>{if("label"in e&&"content"in e)n+=`<tr><td>${decodeHTMLEntities(e.label)}</td><td>${decodeHTMLEntities(e.content)}</td></tr>`;else for(let[t,i]of Object.entries(e))n+=`<tr><td>${decodeHTMLEntities(t)}</td><td>${decodeHTMLEntities(i)}</td></tr>`}));else if("label"in e&&"content"in e)n+=`<tr><td>${decodeHTMLEntities(e.label)}</td><td>${decodeHTMLEntities(e.content)}</td></tr>`;else for(let[t,i]of Object.entries(e))n+=`<tr><td>${decodeHTMLEntities(t)}</td><td>${decodeHTMLEntities(i)}</td></tr>`;i.innerHTML=n}},_dropdownInfo(e,t){if(null!=e&&""!=e){var n,i=document.createElement("div");if(n=t&&isElement(t)?t:document.querySelector(".info-content"),Array.isArray(e)){n.appendChild(i),i.classList.add("info-dropdown");for(let[r,a]of Object.entries(e)){let l=document.createElement("button"),s=document.createElement("div");if(i.appendChild(l),l.classList.add("info-dropdown-toggle"),l.innerHTML=decodeHTMLEntities(a.name),i.appendChild(s),l.addEventListener("click",o),"string"==typeof a.info)s.insertAdjacentHTML("beforeend",`<div>${a.info}</div>`);else if("object"==typeof a.info)for(let[d,c]of Object.entries(a.info))c.type&&`_${this.convertFunctionName(c.type)}`in this&&c.info&&this[`_${this.convertFunctionName(c.type)}`](c.info,s);function o(){l.classList.contains("active")?l.classList.remove("active"):l.classList.add("active")}}}else console.error("Dropdown info format wrong.")}},_button(e,t){var n=document.querySelector(".info-content"),i=document.createElement("div");if(e&&""!=e){t&&isElement(t)?t.appendChild(i):n.appendChild(i),i.classList.add("info-cta");for(let[t,n]of Object.entries(e))if(0==!Object.keys(n).length&&this.arrGotKeyValue(n,"type")){var o=n.type;if(!(`_btn_${o}`in this)){console.error(`Panel button no this ''${o} type function`);continue}this[`_btn_${o}`](n,i)}}},_btn_email(e,t){if(e&&""!=e&&e.email){var n=e["button-name"],i="",o=document.querySelectorAll(".info-cta"),r=o[o.length-1],a=document.createElement("div");t&&isElement(t)?t.appendChild(a):1==o.length?o[0].appendChild(a):r.appendChild(a),e.subject&&(i=`?subject=${e.subject}`),a.innerHTML=`<a href="mailto: ${e.email}${i}" class="info-cta-btn">${decodeHTMLEntities(n.toString())}</a>`}},_btn_url(e,t){if(e&&""!=e&&e.url){var n=e["button-name"],i=n.toString().replace(/\s/g,"_").toLowerCase(),o=document.querySelectorAll(".info-cta"),r=o[o.length-1],a=document.createElement("div");t&&isElement(t)?t.appendChild(a):1==o.length?o[0].appendChild(a):r.appendChild(a),0==e.openNewTab||0==e.openNewTab?e.iframe?(i=this.addinfoPanelEvent(i,e.url),a.innerHTML=`<div class="info-cta-btn" data-info-panel-btn="${i}">${decodeHTMLEntities(n)}</div>`):a.innerHTML=`<a href="${e.url}" class="info-cta-btn" data-infoPanelBtn="${i}">${decodeHTMLEntities(n)}</a>`:a.innerHTML=`<a href="${e.url}" target="_blank" class="info-cta-btn" data-infoPanelBtn="${i}">${decodeHTMLEntities(n)}</a>`}},_btn_view(e,t){var n=document.querySelectorAll(".info-cta"),i=n[n.length-1],o=document.createElement("div");t&&isElement(t)?t.appendChild(o):1==n.length?n[0].appendChild(o):i.appendChild(o),o.innerHTML=`<div class="info-cta-btn" data-view="${e.view}">${decodeHTMLEntities(e["button-name"])}</div>`;var r=o.querySelector("[data-view]");o.addEventListener("click",(()=>{this.function.scene.external.view.switchToView(r.dataset.view)}))},_btn_function(e,t){var n=e.function,i=document.querySelectorAll(".info-cta"),o=i[i.length-1],r=document.createElement("div"),a=document.createElement("div");if(n&&Object.keys(n).length){t&&isElement(t)?t.appendChild(r):1==i.length?i[0].appendChild(r):o.appendChild(r),r.appendChild(a),a.classList.add("info-cta-btn"),a.innerHTML=e["button-name"];for(let[e,t]of Object.entries(n))this.function.scene.internalFunction(t.type,t,a)}},_function(e,t){if(e&&""!=e&&"object"==typeof e){t&&isElement(t)?main=t:main=document.querySelector(".info-content");for(const[t,n]of Object.entries(e))n.type&&n.type in this.function.scene.internal&&this.function.scene.internalFunction(n.type,n)}},_image(e,t){e&&""!=e&&(t&&isElement(t)?this.function.img.content(e,t):this.function.img.content(e,document.querySelector(".info-content")))},_space(e,t){var n;if(!e||""==e)return;n=t&&isElement(t)?t:document.querySelector(".info-content");let i=createEle({tag:"div",style:"height: "+e});n.appendChild(i)},_html(e,t){var n;if(!e||""==e)return;n=t&&isElement(t)?t:document.querySelector(".info-content");let i=createEle("div");n.appendChild(i);for(let[t,n]of Object.entries(e)){let o=createEle("div");this.arrGotKeyValue(e,t)&&i.appendChild(o),o.innerHTML=removeHtmlScriptTag(n)}},_template(e,t){var n,i=this.setting.scene.extensions,o=document.querySelector(".info-content"),r="data-content-template",a=`${r}-anchor`,l=document.querySelector(".info-template");let s=e=>{var t=i["InfoPanel:"+e],s=document.querySelector(`[${r}="${e}"]`),u=document.querySelector(`[${a}="${e}"]`);if(!s){if(!t||!t.template)return void console.error('No found "'+e+'" info template extension.');n!==o&&p(n,e),this.contentTemplate(t),u=document.querySelector(`[${a}="${e}"]`)}n!==l&&(u||p(n,e),n!=o||o.querySelector(`[${a}="${e}"]`)||p(n,e));u=document.querySelector(`[${a}="${e}"]`);var m=l.querySelector(`[${a}="${e}"]`);u&&(m&&u!==m||!m)&&(d(e),c(t))};n=t&&isElement(t)?t:o;for(let t in e){s(e[t])}function d(e){var t=l.querySelector(`[${r}="${e}"]`),n=document.querySelector(`[${a}="${e}"]`);t&&n?n.parentElement.appendChild(t):console.error('This info template "'+e+'" already use by other info function.')}function c(e){if("object"==typeof e)n(e);else if("string"==typeof e){var t="InfoPanel:"+e;t in i&&i[t].template&&n(t)}function n(e){for(let t in e){let n=e[t];n&&"dom"!=t&&"object"==typeof n&&(n.type&&"template"==n.type&&n.info&&Array.isArray(n.info)?u(n.info):"object"==typeof n&&c(n))}}}function p(e,t){var n=document.createElement("div");e.appendChild(n),n.hidden=!0,n.dataset.contentTemplateAnchor=t}function u(e){for(let t=0;t<e.length;t++){d(e[t])}}},contentTemplate(e){var t=document.querySelector('[data-content-template="'+e.name+'"]'),n=(document.querySelector('[data-content-templateanchor="'+e.name+'"]'),document.querySelector(".info-template"));if(!e.content)return void console.error("Info template create failed. Missing content.");if(t||!n)return;let i=document.createElement("div");n.appendChild(i),i.dataset.contentTemplate=e.name,this._loadInfo(e.content,i)},convertFunctionName:e=>e.replace(/-|_/g," ").replace(/(\s+\w{1})/g,(e=>e.toUpperCase())).replace(/\s/g,""),addinfoPanelEvent(e,t){var n,i="";if(this.infoPanelEvent[e]){var o=t=>this.infoPanelEvent[e+`-${t}`]?(t++,o(t)):(i=e+`-${t}`,t);return n=o(2),this.infoPanelEvent[e+`-${n}`]=t,i}return this.infoPanelEvent[e]=t,e},arrGotKeyValue(e,t){return this.function.arrGotKeyValue(e,t)}},upDowndragElement(e,t,n){var i=this,o=0,r=0,a=0,l=window.innerHeight,s=(t.children[0].offsetHeight,t.offsetTop),d=122,c=window.getComputedStyle(t,"::before"),p=c.color,u=c.fontSize;function m(t){if("mousedown"==t.type)(t=t||window.event).preventDefault(),r=t.clientX,a=t.clientY,document.onmouseup=f,document.onmousemove=h;else if("touchstart"==t.type){var n=t.targetTouches[0];t.preventDefault(),r=n.clientX,a=n.clientY,e.ontouchend=f,e.ontouchmove=h}}function h(e){if("mousemove"==e.type)(e=e||window.event).preventDefault(),r-e.clientX,o=a-e.clientY,r=e.clientX,a=e.clientY;else if("touchmove"==e.type){var i=e.targetTouches[0];r-i.clientX,o=a-i.clientY,r=i.clientX,a=i.clientY}n.style.pointerEvents="unset",0!=t.offsetTop?t.offsetTop>0?t.style.top=t.offsetTop-o+"px":t.offsetTop<0&&(t.style.top="0px"):o<0&&(t.style.top=t.offsetTop-o+"px"),t.children[0].style.height="100%";var s=l-t.offsetTop;s<d?s<d&&s>90?(t.children[0].style.opacity=.7,t.style.setProperty("--beforeColor",p),t.style.setProperty("--beforeFontSize",u),t.style.textShadow=""):s<89&&(t.children[0].style.opacity=.4,t.style.setProperty("--beforeColor","white"),t.style.setProperty("--beforeFontSize","35px"),t.style.textShadow="0px 0px 15px #ffffff"):s>d&&(t.children[0].style.opacity="")}function f(o){var r=l-t.offsetTop;n.style.pointerEvents="none",r<d&&(r<d&&r>90?(t.style.top=s+"px",t.children[0].style.opacity=""):r<89&&(t.style.top=l+"px",t.style.setProperty("--beforeHeight",0),i.panelClose())),"mouseup"==o.type?(document.onmouseup=null,document.onmousemove=null):"touchend"==o.type&&(e.ontouchend=null,e.ontouchmove=null)}function g(){return"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0}document.getElementById(e.id+"header")?g()?document.getElementById(e.id+"header").ontouchstart=m:document.getElementById(e.id+"header").onmousedown=m:g()?e.ontouchstart=m:e.onmousedown=m},panelClose(){var e=document.querySelector(".info-content"),t=document.querySelector(".info-main"),n=getElement("info-panel");this.sortOutAllTemplates(),e.innerHTML=null,n.setAttribute("style",""),n.style.display="none",t.setAttribute("style","")},panelOpen(){var e=document.querySelector(".info-content");e.querySelectorAll("[data-content-template]")&&this.panelBeforeOpen(),getElement("info-panel").style.display=null,scrollTo(e)},panelBeforeOpen(){this.sortOutAllTemplates(),document.querySelector(".info-content").innerHTML=null},sortOutAllTemplates(){var e=document.querySelector(".info-content"),t=document.querySelector(".info-template"),n=e.querySelectorAll("[data-content-template]"),i=document.querySelectorAll(".info-dropdown-toggle, .active");n&&n.forEach((e=>{t.appendChild(e)})),i&&i.forEach((e=>{e.classList.remove("active")}))},sample(){console.log("Sample function itemContainer(arr) array"),console.log('\n                    "type": "infoPanel",\n                    "node": "<object name>", //if one object to multi material please add material this example <{material name}object name>, remove <>",\n                    "material": "<material name>",\n                    "content": [\n                        {\n                            "type": "title",\n                            "info": "<custom title>"\n                        },\n                        {\n                            "type": "paragraph",\n                            "info": [\n                                "<custom html information 1>", "<custom html information 2 & etc>"\n                            ]\n                        },\n                        {\n                            "type": "list-info",\n                            "info": {\n                                "<custom left title>": "<custom right info>", //example below\n                                "Series": "Guānyīn Series",\n                                "Date": "2022"\n                            }\n                        },\n                        {\n                            "type": "dropdown-info",\n                            "info": {\n                                "<custom drop down title>": "<custom dropdown info>",\n                                "Description": "Ho, here is my discription.",\n                            }\n                        },\n                        {\n                            "type": "button",\n                            "info": [\n                                {\n                                    "type": "url",\n                                    "button-name": "<custom button name>",\n                                    "url": "< customurl link>",\n                                    "openNewTab": true //true or false,true = This browser tab go this link. false = open a new tab for this link, no need put "", example below \n                                },\n                                {\n                                    "type": "email",\n                                    "button-name": "<custom button name>",\n                                    "email": "<your email>",\n                                    "subject": "<email subject>"\n                                },\n                                {\n                                    "type": "view",\n                                    "button-name": "<custom button name>",\n                                    "view": "<scene view>"\n                                }\n                            ]\n                        }\n                    ]\n                },')}},admin:{},widget:{notification:{},functionPopIp:{},share:{run(){var e=this.setting.widget,t="widget",n="share",i={[t]:n};if(-1!=e.findIndex((e=>e[t]===n)))return;e.push(i);let o=()=>{this.parent;document.body.insertAdjacentHTML("beforeend",'\n                        <div id="share-container" style="pointer-events: none;">\n                            <div id="share-container-slide">\n                                <div id="btn-share" class="ui-hoverable menu-item">\n                                    <i class="fas fa-share-alt" style="font-size: 24px; line-height: 44px; padding-right: 2px;"></i>\n                                </div>\n                                <div id="share-menu" style="display: none;">\n                                    <button data-share="facebook" class="text-brd-btm-clr">\n                                        <i class="fab fa-facebook"></i>\n                                        <span class="text">facebook</span>\n                                    </button>\n                                    <button data-share="twitter"class="text-brd-btm-clr">\n                                        <i class="fab fa-twitter"></i>\n                                        <span class="text">twitter</span>\n                                    </button>\n                                    <button data-share="telegram" class="text-brd-btm-clr">\n                                        <i class="fab fa-telegram-plane"></i>\n                                        <span class="text">telegram</span>\n                                    </button>\n                                    <button data-share="whatsapp" class="text-brd-btm-clr">\n                                        <i class="fab fa-whatsapp"></i>\n                                        <span class="text">whatsapp</span>\n                                    </button>\n                                    <button data-share="copy-link" class="text-brd-btm-clr">\n                                        <i class="fas fa-link"></i>\n                                        <span class="text">Copy Link</span>\n                                    </button>\n                                    <button data-share="other">\n                                        <i class="fas fa-share"></i>\n                                        <span class="text">other</span>\n                                    </button>\n                                </div>\n                            </div>\n                        </div>\n                        ')};"loading"==document.readyState?window.addEventListener("DOMContentLoaded",o):o()},style_1(){var e=getElement("share-container-slide"),t=getElement("btn-share"),n=getElement("share-menu"),i=document.querySelector('[data-share="facebook"]'),o=document.querySelector('[data-share="twitter"]'),r=document.querySelector('[data-share="telegram"]'),a=document.querySelector('[data-share="whatsapp"]'),l=document.querySelector('[data-share="copy-link"]'),s=document.querySelector('[data-share="other"]');e.style.visibility="hidden",checkIsMobile()||(s.remove(),l.setAttribute("class",null)),this.setting.closeUXUI.OpenClose||(this.function.sliding.slideTop(0,e),e.dataset.openClose=0),this.setting.events.shareList=()=>{i.addEventListener("click",(()=>{this.shareLink(i.dataset.share)})),o.addEventListener("click",(()=>{this.shareLink(o.dataset.share)})),r.addEventListener("click",(()=>{this.shareLink(r.dataset.share)})),a.addEventListener("click",(()=>{this.shareLink(a.dataset.share)})),l.addEventListener("click",(()=>{this.shareLink(l.dataset.share)})),checkIsMobile()||s.addEventListener("click",(()=>this.shareLink(s.dataset.share)))},this.setting.events.share=()=>{t.addEventListener("click",(()=>{"none"==n.style.display?this.listOpen():this.listClose()}))},this.setting.closeUXUI.menuClose.shareClose=()=>{this.uxuiClose("slideTop")},setTimeout((()=>{e.style.visibility=""}),1050)},uxuiClose(e){var t=getElement("menu-bar-folder"),n=getElement("share-container-slide");t.addEventListener("click",(()=>{this.listClose(),this.function.sliding.slideTop(0,n)}))},listOpen(){getElement("share-menu").style.display=null},listClose(){getElement("share-menu").style.display="none"},shareLink(e){const t=encodeURI(document.location.href),n=window.location.href,i=document.title,o=`https://wa.me/?text=${t}.${i}`,r=`https://twitter.com/intent/tweet?url=${t}text=${i}`,a=`https://www.facebook.com/sharer.php?u=${t}`,l=`https://t.me/share/url?url=${t}&text=${i}`;if("facebook"==e)window.open(url=a,target="blank");else if("whatsapp"==e)window.open(url=o,target="blank");else if("telegram"==e)window.open(url=l,target="blank");else if("twitter"==e)window.open(url=r,target="blank");else if("copy-link"==e){var s=document.body.appendChild(document.createElement("input"));s.value=window.location.href,s.focus(),s.select(),document.execCommand("copy"),s.parentNode.removeChild(s),alert("URL Copied.")}else"share-other"==e&&navigator.share({title:document.title,text:"",url:n})}},floatingSocialChat:{run(){var e=this.setting.widget,t="widget",n="floatingSocialChat",i={[t]:n};if(-1!=e.findIndex((e=>e[t]===n)))return;e.push(i),this.info={};let o=()=>{document.body.insertAdjacentHTML("beforeend",'\n                        <div class="socialChat" style="visibility: hidden;">\n                            <div class="socialChatSlide">\n                                <div class="socialChatPopup">\n                                    <div>\n                                        <div>\n                                            <div class="socialChatCls">X</div>\n                                            <div style="padding: 0 25px 0 15px;display: flex;flex-direction: column;">\n                                            <span style="font-weight: bold;">Hi, can we help you?</span>\n                                            <span style="font-size: 12px;padding-top: 5px;color: #a3a1a1;"><u>Login to application to chat</u></span>\n                                            </div>\n                                        </div>\n                                        <div class="socialChatFace"></div>\n                                    </div>\n                                    <div style="font-size: 12px;">\n                                        Chat via\n                                        <div class="socialChatApp"></div>\n                                    </div>\n                                </div>\n                                <div class="ui-hoverable socialChatBtm">\n                                    <i class="fa-regular fa-message fa-flip-horizontal" style="font-size: 24px;vertical-align: middle;text-align: center;"></i>\n                                    <div class="socialChatNoti">1</div>\n                                </div>\n                          </div>\n                        </div>\n                        ')};"loading"==document.readyState?window.addEventListener("DOMContentLoaded",o):o()},style_1(e="kardia"){let t=window.location.hostname;if(!document.URL.match(/disableSocialChat/)&&this.hasOwnProperty("info")&&("object"==typeof this.info&&0==Object.keys(this.info).length&&(t.match(/kardiaverse/g)||t.match(/kardiaworld/g)?this.infoSetting("kardia"):t.match(/archimat/g)?this.infoSetting("archimat"):t.match(/dexxr/g)?this.infoSetting("dexxr"):this.infoSetting("kardia")),0!==Object.keys(this.info).length)){e=this.info;var n=document.querySelector(".socialChat"),i=document.querySelector(".socialChatSlide"),o=document.querySelector(".socialChatApp"),r=document.querySelector(".socialChatCls"),a=document.querySelector(".socialChatBtm"),l=document.querySelector(".socialChatPopup"),s=document.querySelector(".socialChatNoti"),d=getElement("menu-bar-folder");getElement("menu-bar-slide");o.innerHTML=this.socialPlatformFilter(e),l.classList.add("active"),i.style.transition="unset";var c=document.body.clientWidth,p=n.offsetWidth;n.getBoundingClientRect().right,a.getBoundingClientRect().left;if(this.setting.closeUXUI.menuClose.floatingSocialChatRightCss=function(){var e=`\n                            <style>\n                            @media only screen and (max-width: ${getElement("menu-bar").offsetWidth+2*(p+20)}px) {\n                              .socialChat { bottom: calc(${getElement("menu-bar-content").offsetHeight}px + 10px) !important; }\n                            }\n                            </style>`;n.insertAdjacentHTML("beforeend",e)},e.setting)if("left"==e.setting.position){var u=getElement("desktop-btm-left-powered");n.style.left="10px",n.style.right="unset",i.style.alignItems="flex-start",a.getBoundingClientRect().left,u&&u.offsetHeight>0&&(n.style.bottom=u.offsetHeight+(document.body.getBoundingClientRect().bottom-u.getBoundingClientRect().bottom)+10+"px"),"close"==e.setting.openClose?i.style.left=-a.offsetWidth+"px":"open"==e.setting.openClose&&(i.style.left=null)}else"right"==e.setting.position&&("close"==e.setting.openClose?i.style.right=-a.offsetWidth+"px":"open"==e.setting.openClose&&(i.style.right=null));this.setting.closeUXUI.menuClose.floatingSocialChat=()=>{a.addEventListener("click",m),r.addEventListener("click",m),d.addEventListener("click",(()=>{m("close"),i.style.left?this.function.sliding.slideLeft(0,i):this.function.sliding.slideRight(0,i)}))},l.classList.remove("active"),n.style.visibility="",setTimeout((()=>{i.style.transition=""}),100)}function m(e){"close"==e?l.classList.remove("active"):"open"==e?(l.classList.add("active"),s.style.display="none"):l.classList.contains("active")?l.classList.remove("active"):(l.classList.add("active"),s.style.display="none")}},infoSetting(e){if(!e||!this.hasOwnProperty("info"))return;if("string"==typeof e)"kardia"==e.toLowerCase()?this.info=this.kardiaInfo():"archimat"==e.toLowerCase()?this.info=this.archiomatInfo():"dexxr"==e.toLowerCase()&&(this.info=this.dexxrInfo());else{if("object"!=typeof e||null===e)return void console.error("Please fill in your social media chat information, you can use API function floatingSocialChat().sample() to see the sample.");if(!(e.messenger||e.whatsapp||e.telegram||e.wechat||e.line||e.email))return void console.error("Please fill in your social media chat information, you can use API function floatingSocialChat().sample() to see the sample.");var t;t=this.setting.closeUXUI.openClose?"open":"close",e.setting?(e.setting.openClose&&(e.setting.openClose=t),"left"===e.setting.position&&"right"===e.setting.position||(e.setting.position="right")):(e.setting={},e.setting.openClose=t,e.setting.position="right"),this.info=e}let n=document.querySelector(".socialChatApp");"complete"==document.readyState&&n&&n.firstChild&&(n.innerHTML=this.socialPlatformFilter(this.info))},disable(){delete this.info,"complete"==!document.readyState&&window.addEventListener("load",(()=>{getElementById("socialChat").hidden=!0,getElementById("socialChat").style.display="none"}))},kardiaInfo(){var e;return e=this.setting.closeUXUI.openClose?"open":"close",array={messenger:"kardiaworld",whatsapp:"+65 9090 3082",telegram:null,wechat:null,line:null,email:"hello@kardiaworld.com",setting:{openClose:e,position:"right"}},array},archiomatInfo(){var e;return e=this.setting.closeUXUI.openClose?"open":"close",array={messenger:"archimat.xr",whatsapp:"+65 9090 3082",telegram:null,wechat:null,line:null,email:"hello@archimat.io",setting:{openClose:e,position:"right"}},array},dexxrInfo(){var e;return e=this.setting.closeUXUI.openClose?"open":"close",array={messenger:"dexXR",whatsapp:"+65 9090 3082",telegram:null,wechat:null,line:null,email:"hello@dexxr.io",setting:{openClose:e,position:"right"}},array},sample(){console.log({messenger:"YOUR ID",whatsapp:"YOUR PHONE NUMBER",telegram:"YOUR ID",wechat:"YOUR ID",line:"YOUR ID",email:"YOUR EMAIL",setting:{openClose:"close",position:"right"}})},socialPlatformFilter(e,t){var n="";if(t||(t=encodeURI("Enquiry from virtual scene: "+document.title)),e.messenger){var i="http://m.me/";e.messenger.match(i)&&(e.messenger=e.messenger.replace(i,"")),n+=`<a href="${i+e.messenger}" target="_blank" data-action="social-chat/messenger" title="Messenger" itemprop="url"><i class="fa-brands fa-facebook-messenger"></i></a>`}if(e.whatsapp){i="https://wa.me/+";e.whatsapp.match(i)&&(e.whatsapp=e.whatsapp.replaceAll(i,"")),e.whatsapp.match(" ")&&(e.whatsapp=e.whatsapp.replaceAll(" ","")),e.whatsapp.match(/[&\/\\#,+()$~%.'":*?<>{}]/g)&&(e.whatsapp=e.whatsapp.replace(/[&\/\\#,+()$~%.'":*?<>{}]/g,"")),n+=`<a href="${i+e.whatsapp}?text=${t}" target="_blank" title="WhatsApp" itemprop="url"><i class="fa-brands fa-whatsapp"></i></a>`}if(e.telegram){i="https://t.me/";e.telegram.match(i)&&(e.telegram=e.telegram.replace(i,"")),n+=`<a href="${i+e.telegram}&text=${t}" target="_blank" title="Telegram" itemprop="url"><i class="fa-brands fa-telegram"></i></a>`}if(e.wechat&&this.mobileAndTabletCheck()){i="weixin://dl/chat?";e.wechat.match(i)&&(e.wechat=e.wechat.replace(i,"")),n+=`<a href="${i+e.wechat}" target="_blank" title="Wechat" itemprop="url"><i class="fa-brands fa-weixin"></i></a>`}if(e.line){i="https://line.me/R/oaMessage/";e.line.match(i)&&(e.line=e.line.replace("l","")),n+=`<a href="${i+e.line}/?${t}" target="_blank" title="Line" itemprop="url"><i class="fa-brands fa-line"></i></a>`}return e.email&&(n+=`<a href="mailto:${e.email}?subject=${t}" target="_blank" title="Email" itemprop="url"><i class="fa-regular fa-envelope"></i></a>`),n},mobileAndTabletCheck(){let e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||window.opera),e}},leftBottomPoweredBy:{run(e="Kardia",t="https://www.kardiaworld.com/"){let n=()=>{if(!getElement("desktop-btm-left-powered")){var n=`\n                            <div id="desktop-btm-left-powered" class="ui-bottom ui-left ">\n                                <div id="powered-panel" class="ui-hoverable ui-panel menu-background menu-1-ui-hoverable">\n                                    <a href="${t}" target="blank">VR Scene Powered By ${e}</a>\n                                </div>\n                                <style>\n                                #desktop-btm-left-powered {position: absolute;z-index: 15;overflow: hidden;max-width: calc(50vw - (420px / 2) - 10px - 50px);border-radius: calc(var(--borderRadius) / 2);}#powered-panel {cursor: pointer;padding: 5px 12px 5px 12px;background-color: var(--backgroundColor);}#powered-panel > a {color: var(--button_color);text-decoration: none;}#powered-panel > a:hover {color: var(--button_hoverColor) !important;}@media only screen and (max-width: calc(420px + ((10px + 193px + 50px) * 2))) {#desktop-btm-left-powered {display: none;}}@media only screen and (max-width: 450px) {#desktop-btm-left-powered {display: none;}}\n                                </style>\n                            </div>`;return document.body.insertAdjacentHTML("beforeend",n),getElement("desktop-btm-left-powered")}};"loading"==document.readyState?window.addEventListener("DOMContentLoaded",n):n()}},OtherUXUI:{setting:{},run(){var e=this.setting.widget,t="widget",n="OtherUXUI",i={[t]:n},o=e.findIndex((e=>e[t]===n));if(Array.isArray(e)&&-1==o)for(let t=0;t<e.length;t++)if("object"==typeof e[t]){if(n in e[t])return;if(t+1==e.length)return void e.push(i)}},style_1(){this.playButtonToText(),this.infoBar(),this.primaryProgress(),this.infoBar()},playButtonToText(e="Start",t,n="black",i="var(--backgroundColor, rgba(255, 255, 255, 0.8))",o="white"){var r,a;getElement("play-button").remove(),r=t?t.toString():"padding: 15px 30px; font-size: 15px; letter-spacing: 0.1rem; border-radius: 30px; transition: all 0.2s ease 0s; text-transform: uppercase; width: 100%; text-align: center;",a=`\n                    <div id="play-button" class="absolute-center">\n                        <p class="ui-panel" style="">\n                            ${e.toString()}\n                        </p>\n                        <style>#play-button > p {pointer-events: none;${r} color: ${n}; background-color: ${i};}</style>\n                    </div>`,document.body.insertAdjacentHTML("beforeend",a)},infoBar(){getElement("info-author")&&(getElement("info-author").parentElement.style.display="none"),getElement("info-text").setAttribute("style","height: unset !important;padding: 10px;background-color: var(--backgroundColor, rgba(255, 255, 255, 0.8));border-radius: calc(var(--borderRadius) / 2);"),getElement("info-title").setAttribute("style","color: var(--button_color);")},primaryProgress(e="rgba(255,255,255,0.9)"){getElement("primary-progress-done").style.stroke=e},infoBar(){}}},function:{img:{...{load:void document.head.insertAdjacentHTML("beforeend","<style>\n                figure{margin:0;}figure > img{width: 100%;}.info-img.thumbnails-1 {display: grid;grid-template-rows: auto;grid-template-columns: repeat(auto-fill, minmax(130px, 1fr));gap: 1rem;}.info-img.thumbnails-1 figure {margin-bottom: var(--empty-space);}.info-img .selected {border: 4px solid lightgreen;}\n                </style>"),content(e,t){e.parent&&!t&&(e.parent.dom?t=dom:e.parent.id?t=document.getElementById(e.parent.id):e.parent.class?t=document.querySelector(e.parent.class):e.parent.style&&(t=document.querySelector(e.parent.style))),t||console.error("Image function missing element or parent info.");var n,i="displayType",o="layout",r="layoutType",a="img",l="Image format wrong";if(!e[i])return console.error(l),"";if("single"==e[i])this.single(e[a],t);else if(e[i]in this){if(!e[o]||!e[a])return console.error(l),"";if(e[a]&&!e[a].length)return console.error("Array no image."),"";if(e[r]){if(isNaN(Math.floor(e[r])))return void console.error("Image 'layoutType' need using number")}else e[r]=1;n="layout_"+e[r],e[o]in this[e[i]]&&n in this[e[i]][e[o]]&&"function"==typeof this[e[i]][e[o]][n]&&this[e[i]][e[o]][n](e,t)}},single(e,t){let n="url",i="content",o="function",r="type";if(!e||!t||"object"!=typeof e||!(n in e))return;if(!(isElement(t)&&"string"!=t||(t=getElement(t))))return void console.error("Something wrong. No this element!");if(!/\.(jpg|jpeg|png)$/.test(e[n]))return void console.error("Info panel image gallery only support 'jpg' / 'jpeg' / 'png'.");let a,l=document.createElement("figcaption"),s=document.createElement("img"),d=e[n];if(e.attr&&"object"==typeof e.attr?(e.attr.tag="figure",a=createEle(e.attr)):a=document.createElement("figure"),t.appendChild(a),a.appendChild(s),a.appendChild(l),l.innerHTML=e[i]?e[i]:"",e.extraAssets?s.src=getExtraAssetUrl(d):s.src=d,e[o]&&"object"==typeof e[o])for(let[t,n]of Object.entries(e[o]))if(n[r]){if("SwitchMaterial"==n[r]&&n.toReplace){var c=createEle({tag:"img",src:getExtraAssetUrl(d)});c.setAttribute("crossorigin","anonymous"),n.material.type="dom",n.material.dom=c}this.function.scene.internalFunction(n[r],n,s)}return{figure:a,img:s,caption:l}},gallery:{masonry:{layout_1:()=>"aaa"},mosaic:{},thumbnails:{layout_1(e,t){let n="img",i="layout",o="layoutType",r=document.createElement("div");if(e&&t&&i in e&&o in e&&n in e)if(isElement(t)&&"string"!=t||(t=getElement(t))){t.appendChild(r),r.setAttribute("class",`info-img ${e[i]}-${e[o]}`);for(let t=0;t<e[n].length;t++){let i=this.function.img.single(e[n][t],r);e.select&&this.function.img.imgFunc.select(i.img,r)}}else console.error("Something wrong. No this element!")}},grid:{},slideshow:{},imageBrowser:{},blogStyle:{},carousel:{},tabGallery:{}},imgFunc:{select(e,t,n,i="img",o="selected"){e.addEventListener("click",(r=>{t.querySelectorAll(i).forEach((e=>{e.classList.remove(o)})),e.classList.add(o),"function"==typeof n&&n()}))},crossSelect(){},filter(){},multiSelect(){},selectWithButtonConfirm(){},filter:{}}}},scene:{internal:{Audio(){},ChangeView(e,t){if(!(e&&"object"==typeof e&&e.views&&Array.isArray(e.views)&&e.views.length))return;let n=this.setting.scene.viewStatus;const i=()=>{let t=this.function.scene.external.view;if(1==e.views.length)t.switchToView(e.views[0]),n.view=e.views[0],a();else{let l=Math.floor(1e4*Math.random());if(e.tour){n.tourCode=l,n.tourExtensionName=e.type+":"+e.name;for(let[o,r]of Object.entries(e.views)){var i=setTimeout((()=>{l===n.tourCode&&n.tour?(t.switchToView(r),n.view=r,o==e.views.length-1&&a()):clearTimeout(i)}),(1e3*WALK.TELEPORT_TO_VIEW_ACCELERATION+WALK.AUTO_TOUR_IN_VIEW_STILL_TIME_MS)*(0==o?.05:o));n.tour=1,n.tourProcess.push(i)}}else{var o,r=n.changeViewExtensions;e.name||(e.name=function e(t,n){let i;if(t.name)console.error("This arr got name.");else{if(i="RamdomName"+Math.floor(1e3*Math.random()),!(t.type+":"+i in n))return i;e(t,n)}}(e,r)),e.name in r||(r[e.name]={}),void 0===(o=r[e.name]).index||o.index>=e.views.length-1?(t.switchToView(e.views[0]),n.view=e.views[0],o.index=0):(n.view=e.views[o.index+1],t.switchToView(e.views[o.index+1]),o.index++),n.tour=0,a()}}function a(){n.tour=0,n.tourProcess=[],n.tourCode=0,n.tourExtensionName=null}};if(t){if(!(isElement(t)&&"string"!=t||(t=getElement(t))))return void console.error(`${arguments.callee.name} missing or wrong element.`);t.addEventListener("click",i)}else i()},HtmlLabel(e,t){if(!e)return;const n=()=>{this.function.scene.external.trigger.openPopUp(e)};if(t){if(!(isElement(t)&&"string"!=t||(t=getElement(t))))return void console.error(`${arguments.callee.name} missing or wrong element.`);t.addEventListener("click",n)}else n()},InfoPanel(t,n){const i=()=>{e.infoPanel.content(t)};if(n){if(!(isElement(n)&&"string"!=n||(n=getElement(n))))return void console.error(`${arguments.callee.name} missing or wrong element.`);n.addEventListener("click",i)}else i()},MaterialPicker(e,t){},MultiTrigger(e,t){if(!e.extensions||!Array.isArray(e.extensions))return;const n=()=>{let t=this.setting.scene.extensions;for(i in e.extensions){var n=e.extensions[i];if("string"==typeof n||!n.match(/\:/)){var o=n.split(":"),r=o[0],a=o[1];if(r in this)for(let[e,n]of Object.entries(t))n.type===r&&n.name===a&&this[n.type](n)}}};if(t){if(!(isElement(t)&&"string"!=t||(t=getElement(t))))return void console.error(`${arguments.callee.name} missing or wrong element.`);t.addEventListener("click",n)}else n()},ObjectsHide(e,t){let n=this.function.scene.external.node;if(!e)return;const i=()=>{"string"==typeof e?n.nodeHide(e):Array.isArray(e)?e.forEach((e=>{n.nodeHide(e)})):"object"==typeof e&&e.nodeType&&n.nodeHide(e.nodeType)};if(t){if(!(isElement(t)&&"string"!=t||(t=getElement(t))))return void console.error(`${arguments.callee.name} missing or wrong element.`);t.addEventListener("click",i)}else i()},ObjectsShow(e,t){let n=this.function.scene.external.node;if(!e)return;const i=()=>{"string"==typeof e?n.nodeShow(e):Array.isArray(e)?e.forEach((e=>{n.nodeShow(e)})):"object"==typeof e&&e.nodeType&&n.nodeShow(e.nodeType)};if(t){if(!(isElement(t)&&"string"!=t||(t=getElement(t))))return void console.error(`${arguments.callee.name} missing or wrong element.`);t.addEventListener("click",i)}else i()},OpenWebsite(e,t){},Script(e,t){if(!e||!e.code)return;e.trigger&&"dom"==e.trigger.type&&(e.trigger.dom=t);const n=()=>{new Function(e.code)()};if(t){if(!(isElement(t)&&"string"!=t||(t=getElement(t))))return void console.error(`${arguments.callee.name} missing or wrong element.`);t.addEventListener("click",n)}else n()},SwitchObjects(e,t){let n=this.function.scene.external,i=n.node,o=this.setting.scene.triggerStatus[e.type+":"+e.name],r=e.nodeTypes.length;if(!e.nodeTypes||!Array.isArray(e.nodeTypes))return;const a=()=>{o.node[o.active]&&i.nodeHide(o.node[o.active]),o.active++,e.hideAllAfterLast?o.active>r&&(o.active=0):o.active>r-1&&(o.active=0),o.node[o.active]&&i.nodeShow(o.node[o.active]),n.other.requestFrame()};if(t){if(!(isElement(t)&&"string"!=t||(t=getElement(t))))return void console.error(`${arguments.callee.name} missing or wrong element.`);t.addEventListener("click",a)}else a()},SwitchMaterial(e,t){const n=()=>{this.function.scene.external.material.switchMaterial(e)};if(t){if(!(isElement(t)&&"string"!=t||(t=getElement(t))))return void console.error(`${arguments.callee.name} missing or wrong element.`);t.addEventListener("click",n)}else n()},VideoTextureControl(e,t){}},external:{material:{createNewMaterial(){},createNewTextureFromCanvas(e){const t=()=>{var t=new WALK.Texture(e);return t.width=e.width,t.height=e.height,t.hasAlpha=!1,t.minFilter=GLC.LINEAR,t.wrapS=GLC.REPEAT,t.wrapT=GLC.REPEAT,t.needsUpdate=!0,t.notifyLoaded(),t};if("loading"!=document.readyState)return t();this.function.addAction(t)},createTextureFromHtmlImage(e,t=!0){const n=()=>this.function.kd().createTextureFromHtmlImage(e,t);if("loading"!=document.readyState)return n();this.function.addAction(n)},createTextureFromHtmlVideo(e){const t=()=>this.function.kd().createTextureFromHtmlVideo(e);if("loading"!=document.readyState)return t();this.function.addAction(t)},createImageTexture(e,t=!0){if(!e)return void console.error("Missing image link.");if(!/\.(jpg|jpeg|png)$/.test(e))return void console.error('"createImageTexture" only support jpg|jpeg|png url link.');const n=()=>{var n=document.createElement("img");return n.src=e,this.createTextureFromHtmlImage(n,t)};if("loading"!=document.readyState)return n();this.function.addAction(n)},createVideoTexture(e,t=!0,n=!0){if(!e)return void console.error("Missing video link.");if(!/\.(mp4)$/.test(e))return void console.error('"createVideoTexture" only support .mp4 url link.');const i=()=>{const i=document.createElement("video");return i.src=e,i.autoplay=!1,i.muted=t,i.loop=n,this.createTextureFromHtmlVideo(i)};if("loading"!=document.readyState)return i();this.function.addAction(i)},getEditableMaterials(){},handleHoverChanged(e,t){const n=()=>{var n=WALK.getViewer();if(t){document.body.style.cursor="pointer",e.emissive=!0;e.emissionStrength=0,clearInterval(o);var i=0,o=setInterval((function(){i>=.2&&(i=.2,clearInterval(o)),e.emissionStrength=i,i+=.2/30}),10);n.requestFrame()}else document.body.style.cursor="",e.emissive=!1,n.requestFrame()};"loading"==document.readyState?this.function.addAction(n):n()},onMaterialClicked(e,t){const n=()=>{this.function.kd().onMaterialClicked(e,t)};"loading"==document.readyState?this.function.addAction(n):n()},onMaterialHoverChanged(e,t){const n=()=>{this.function.kd().onMaterialHoverChanged(e,t)};"loading"==document.readyState?this.function.addAction(n):n()},getEditableMaterials(){const e=()=>this.function.kd().getEditableMaterials(materialName.toString());if("loading"!=document.readyState)return e();this.function.addAction(e)},findMaterial(e){if(!e)return void console.error('Missing "findMaterial" argument.');const t=()=>this.function.kd().findMaterial(e.toString());if("loading"!=document.readyState)return t();this.function.addAction(t)},setAllMaterialsEditable(){const e=()=>{this.function.kd().setAllMaterialsEditable()};"loading"==document.readyState?this.function.addAction(e):e()},setMaterialEditable(e){const t=()=>{this.function.kd().setMaterialEditable(e.toString())};"loading"==document.readyState?this.function.addAction(t):t()},setMaterialForMesh(e,t){const n=()=>{this.function.kd().setMaterialForMesh(e,t)};"loading"==document.readyState?this.function.addAction(n):n()},setMaterialForNode(){},switchMaterial(e){const t=()=>{if(!e||"object"!=typeof e||!e.material||!e.toReplace)return;let t=this.function.kd();var n=()=>{var n,i=this.setting.scene.material,o=null;if("sceneMaterial"==e.material.type)n=this.findMaterial(e.material.name);else if("dom"==e.material.type&&e.material.dom){var r=e.material.dom;n=r instanceof HTMLVideoElement?this.createTextureFromHtmlVideo(r):this.createTextureFromHtmlImage(r,!(!e.material.img||void 0===e.material.img.transparent)&&e.material.img.transparent),e.material.img&&e.material.img.transparent&&(n.isCutout=!0),e.material.url&&(n.id=e.material.url)}else if("url"==e.material.type&&e.material.url){var a=e.material.url;if(e.material.extraAssets&&(a=this.function.scene.external.other.getExtraAssetUrl(a)),/\.(jpg|jpeg|png)$/.test(a)?o="img":/\.(mp4)$/.test(a)&&(o="video"),!o)return void console.error('"switchMaterial" only support url video / image format: jpg|jpeg|png|mp4');if(e.material.url in i.texture)n=i.texture[e.material.url],"video"==o&&(n.pause(),n.rewind());else{if("img"==o)n=this.createImageTexture(a,!(!e.material.img||void 0===e.material.img.transparent)&&e.material.img.transparent),e.material.img&&e.material.img.transparent&&(n.isCutout=!0);else if("video"==o){var l=!0,s=!0;e.material.video&&e.material.video.muted&&(l=!0),e.material.video&&e.material.video.loop&&(s=!0),n=this.createVideoTexture(a,l,s)}n.id=e.material.url,i.texture[e.material.url]=n}}if(n){if(Array.isArray(e.toReplace))for(let r=0;r<e.toReplace.length;r++){var d=t.findMaterial(e.toReplace[r]);if(console.log(d),d)if("sceneMaterial"==e.material.type){var c="baseColor",p="baseColorTexture",u="roughness",m="roughnessTexture",h="metallic",f="roughnessTexture",g="bumpTexture",b="bumpScale";e.material.name in i?(d[c]=i[e.material.name][c],d[p]=i[e.material.name][p],d[u]=i[e.material.name][u],d[m]=i[e.material.name][m],d[h]=i[e.material.name][h],d[f]=i[e.material.name][f],d[g]=i[e.material.name][g],d[b]=i[e.material.name][b]):(d[c]=n[c],d[p]=n[p],d[u]=n[u],d[m]=n[m],d[h]=n[h],d[f]=n[f],d[g]=n[g],d[b]=n[b])}else d.baseColorTexture=n,"video"==o&&d.baseColorTexture.play();else console.error("No found material to switch.")}else{d=t.findMaterial(e.toReplace).baseColorTexture;d=n}t.requestFrame()}};e.trigger&&"node"==e.trigger.type&&e.trigger.nodeType?t.onNodeTypeClicked(e.trigger.nodeType,((e,t,i)=>(n(),!0))):n()};"loading"==document.readyState?this.function.addAction(t):t()},materialSwitchTexture(){}},node:{checkNodeTypeVisible(e){if(this.findNodesOfType(e)[0].mesh||this.findNodesOfType(e).mesh)return this.findNodesOfType(e)[0].mesh._visible;var t=this.findNodesOfType(e)[0].children;for(let e of t)if(this.checkNodeTypeVisible(e.config.name))return 1;return 0},onNodeTypeClicked(e,t){const n=()=>{this.function.kd().onNodeTypeClicked(e,t)};"loading"==document.readyState?this.function.addAction(n):n()},onNodeTypeHoverChanged(e,t){},findNodesOfType(e){return this.function.kd().findNodesOfType(e)},findMeshesWithMaterial(){},getEditableNodeTypes(){},nodeHide(e){if(Array.isArray(e)&&e[0]&&e[0].mesh&&e[0].config.name)for(const t of e)t.hide();else if(Array.isArray(e)){for(let t of e)if(this.findNodesOfType(t))for(const e of this.findNodesOfType(t))e.hide()}else if(this.findNodesOfType(e))for(const t of this.findNodesOfType(e))t.hide();this.function.scene.external.other.requestFrame()},nodeShow(e){if(Array.isArray(e)&&e[0]&&e[0].mesh&&e[0].config.name)for(const t of e)t.show();else if(Array.isArray(e)){for(let t of e)if(this.findNodesOfType(t))for(const e of this.findNodesOfType(t))e.show()}else if(this.findNodesOfType(e))for(const t of this.findNodesOfType(e))t.show();this.function.scene.external.other.requestFrame()},setNodeTypeEditable(e,t){const n=()=>{this.function.kd().setNodeTypeEditable(e,t)};"loading"==document.readyState?this.function.addAction(n):n()}},trigger:{addAnchor(e,t){if(e)return this.function.kd().addAnchor(e,t);console.error('Missing "addAnchor" argument.')},script(){},onTriggerStart(){},onTriggerEnd(){},openPopUp(e){url||console.error("'openPopUp' missing content.");const t=()=>{let t=getElement("ext-html-label-content"),n=getElement("ext-html-label-close");t.innerHTML=decodeHTMLEntities(e),this._openPopUp(),n.addEventListener("click",this._closePopUp)};"loading"==document.readyState?this.function.addAction(t):t()},openPopUpWithScript(e){url||console.error("'openPopUp' missing content.");const t=()=>{var t=getElement("ext-html-label-content"),n=getElement("ext-html-label-close");t.innerHTML=e.toString(),this._openPopUp(),n.addEventListener("click",this._closePopUp)};"loading"==document.readyState?this.function.addAction(t):t()},openPopUpIframe(e,t,...n){e||console.error("'openPopUpIframe' missing url link."),t=t&&"no"!=t?"yes":"no";const i=()=>{let i,o,r=getElement("ext-html-label-content"),a=getElement("ext-html-label-close"),l="";n[0].scene&&1==n[0].scene&&(l='allow = "gyroscope; accelerometer; xr-spatial-tracking; vr;"'),o="\n                            <style>.ext-popup {top: 0;left: 0;bottom: 0;right: 0;}#ext-html-label-content {padding-top: 38px;height: 100%;width: 100vw;max-height: 100vh;max-width: 100vw;overflow-wrap: break-word;overflow-y: auto;overflow-x: hidden;}#ext-html-label-content iframe {width: 100%;height: 100%;max-height: calc(100% - 4px);}#ext-html-label-close {position: absolute;display: flex;justify-content: flex-end;padding: 10px 15px;background-color: transparent;margin-left: 0;}</style>\n                            ",i=`<iframe src="${decodeHTMLEntities(e)}" name="Kardia" style="border:0px #ffffff none;" scrolling="${t}" frameborder="1" marginheight="0px" marginwidth="0px" height="100%" width="100%" allowfullscreen ${l}></iframe>`,r.innerHTML=i+"\n                            <style>.ext-popup {top: 0;left: 0;bottom: 0;right: 0;}#ext-html-label-content {padding-top: 38px;height: 100%;width: 100vw;max-height: 100vh;max-width: 100vw;overflow-wrap: break-word;overflow-y: auto;overflow-x: hidden;}#ext-html-label-content iframe {width: 100%;height: 100%;max-height: calc(100% - 4px);}#ext-html-label-close {position: absolute;display: flex;justify-content: flex-end;padding: 10px 15px;background-color: transparent;margin-left: 0;}</style>\n                            ",this._openPopUp(),a.addEventListener("click",this._closePopUp)};"loading"==document.readyState?this.function.addAction(i):i()},openPopUpScene(e){this.openPopUpIframe(e,0,{scene:1})},openPopUpVideo(){},_openPopUp(){let e=getElement("ext-html-label");e.classList.add("ext-html-label-topleft"),e.classList.add("ui-out"),e.style.display=null,setTimeout((function(){e.classList.remove("ui-out")}),10)},_closePopUp(){var e=getElement("ext-html-label"),t=getElement("ext-html-label-content"),n=getElement("ext-html-label-close");e.classList.add("ui-out"),setTimeout((function(){e.classList.remove("ext-html-label-topleft"),e.classList.remove("ui-out"),e.style.display="none",t.innerHTML=""}),400),n.removeEventListener("click",this._closePopUp)},selectTrigger(){}},view:{getCameraPosition(){const e=()=>this.function.kd().getCameraPosition();if("loading"!=document.readyState)return e();this.function.addAction(e)},getCameraRotation(){const e=()=>this.function.kd().getCameraRotation();if("loading"!=document.readyState)return e();this.function.addAction(e)},getSceneBoundingBox(){const e=()=>this.function.kd().getSceneBoundingBox();if("loading"!=document.readyState)return e();this.function.addAction(e)},onViewSwitchStarted(e){const t=()=>{this.function.kd().onViewSwitchStarted(e)};"loading"==document.readyState?this.function.addAction(t):t()},onViewSwitchDone(e){const t=()=>{this.function.kd().onViewSwitchDone(e)};"loading"==document.readyState?this.function.addAction(t):t()},switchToView(e,t){const n=()=>{this.function.kd().switchToView(e,t)};"loading"==document.readyState?this.function.addAction(n):n()},viewsTour(){},position(){},rotation(){}},other:{addExtension(e,t=0){let n=this.setting.scene.extensions,i=this.function.scene,o=i.internal,r=this.function.kd();if(e.type)if(e.name)if(e.trigger)if(e.type in o){if(!(e.name in n)){if(n[e.type+":"+e.name]=e,t)if(e.trigger){let t=e.trigger,n=t.type;"run"==n&&t.run?i.internalFunction(e.type,e):"dom"==n&&t.dom?i.internalFunction(e.type,e,t.dom):"node"==n&&t.nodeType?(r.onNodeTypeClicked(t.nodeType,((t,n,o)=>(i.internalFunction(e.type,e),!0))),this.setting._EDIT_MODE&&this.function.addAction((()=>{sce.extensionsNode[e.type+":"+e.name]=i.externalFunction("findNodesOfType",t.nodeType)[0]}),2)):"sphere"!=n&&"sprite"!=n||this.function.addAction((()=>{let t=i.external.trigger.addAnchor(e.trigger,(()=>{i.internalFunction(e.type,e)}));this.setting._EDIT_MODE&&(sce.extensionsNode[e.type+":"+e.name]=t)}),2)}else i.internalFunction(e.type,e);return!0}console.error(`Type "${e.type}" extension got name "${e.name}" already`)}else console.error(`Can't find "${e.type}" this extension function.`);else console.error(`Got "${e.type}" extension missing trigger.`);else console.error(`Got "${e.type}" extension missing name.`);else console.error("Missing extension type details.")},apiUserChangeState(){},captureImage(e){const t=()=>{this.function.kd().captureImage(e)};"loading"==document.readyState?this.function.addAction(t):t()},closeMaterialPicker(){},disableMinimap(){},disableVR(){},enableMinimap(){},enableVR(){},getApiUserState(){},getExtension(e,t){const n=()=>this.function.kd().getExtension(e,t);if("loading"!=document.readyState)return n();console.error('Function getExtension faild. Can be via function "onSceneLoadComplete"')},getExtensionConfig(){return this.setting.scene.extensions},getExtraAssetUrl(e){if("loading"!=document.readyState)return(()=>{if(window.hasOwnProperty("WALK"))return WALK.getExtraAssetUrl(e)})();console.error("Function getExtraAssetUrl faild.  Can be called only after page assets finish loading")},helpVisible(e){let t=this.function.kd(),n=getElement("desktop-help");!0===e?t.helpVisible=!0:!1===e?t.helpVisible=!1:"none"==n.style.display?t.helpVisible=!0:t.helpVisible=!1},moveTarget(e=!0){window.addEventListener("load",(t=>{WALK.CLICK_MOVE_SHOW_TARGET_INDICATOR=e}))},onApiUserStateChanged(){},onSceneReadyToDisplay(e){const t=()=>{this.function.kd().onSceneReadyToDisplay(e)};"loading"==document.readyState?this.function.addAction(t):t()},onSceneLoadComplete(e){const t=()=>{this.function.kd().onSceneLoadComplete(e)};"loading"==document.readyState?this.function.addAction(t):t()},openMaterialPicker(){},play(){this.function.kd().play()},infoPanelClose(){this.infoPanel.panelClose()},removeAnchor(){},requestFrame(){const e=()=>{this.function.kd().requestFrame()};"loading"==document.readyState?console.error("Function requestFrame only support after scene load."):e()},seeItem(e){const t=()=>{this.function.kd().seeItem(e)};if("loading"!=document.readyState)return t();console.error("Function seeItem faild. Can be run it after scene load complate.")}},analytics:{}},internalFunction(e,t,n){var i,o=this.internal,r=this.setting.initExclude;let a=function o(a){if("object"==typeof a)for(let[l,s]of Object.entries(a))if(-1==r.indexOf(l)&&"function"!=l){if(l==e){let e=a[l](t,n);return i=1,e}if("object"==typeof s){let e=o(s);if(e)return e}}}(o);if(a)return a;i||console.error(`No '${e}' inside scene funtion.`)},externalFunction(e,t,n){var i,o=this.external,r=this.setting.initExclude;let a=function o(a){if("object"==typeof a)for(let[l,s]of Object.entries(a))if(-1==r.indexOf(l)&&"function"!=l){if(l==e){let e=a[l](t,n);return i=1,e}if("object"==typeof s){let e=o(s);if(e)return e}}}(o);if(a)return a;i||console.error(`No '${e}' inside scene funtion.`)},kdExtensionsManager(e){if(!e||!Array.isArray(e))return;const t=()=>{let t=this.function.kd(),n=this.setting.scene,i=n.extensions;this.scanAndSetExtentions(e),function(){let e=n.viewStatus,t="view-list-items";if(document.getElementById(t)){let n=document.getElementById(t).children;for(var o=0;o<n.length;o++)n[o].addEventListener("click",(()=>{if(e.tourExtensionName in i&&e.tour){if(e.tour=0,e.tourCode=null,e.tourExtensionName=null,viesstatus.tourProcess.length)for(o in viesstatus.tourProcess)clearTimeout(viesstatus.tourProcess[o]);viesstatus.tourProcess=[null]}}))}}();for(let t=0;t<e.length;t++)this.external.other.addExtension(e[t]);for(let[e,o]of Object.entries(i)){let r=o,a=r.trigger;if(a){let o=a.type;if("run"==o){if(!a.run)continue;a.run&&this.internalFunction(r.type,r)}else"dom"==o&&a.dom?this.internalFunction(r.type,r,a.dom):"node"==o&&a.nodeType?(t.onNodeTypeClicked(a.nodeType,((e,t,n)=>(this.internalFunction(r.type,r),!0))),this.setting._EDIT_MODE&&this.function.addAction((()=>{n.extensionsNode[r.type+":"+r.name]=this.externalFunction("findNodesOfType",a.nodeType)[0]}),2)):"sphere"!=o&&"sprite"!=o||this.function.addAction((()=>{let t=this.external.trigger.addAnchor(i[e].trigger,(()=>{this.internalFunction(r.type,r)}));this.setting._EDIT_MODE&&(n.extensionsNode[r.type+":"+r.name]=t)}),2)}else this.internalFunction(r.type,r)}};"loading"==document.readyState?this.function.addAction(t):t()},scanAndSetExtentions(e){let t=this.function.scene.external;const n=e=>{for(let[t,r]of Object.entries(e))if(r){if(r.type&&r.type in this.internal){if("SwitchMaterial"==r.type){i(r);continue}if("SwitchObjects"==r.type){o(r);continue}}("object"==typeof r||Array.isArray(r))&&n(r)}},i=e=>{if(!e.toReplace)return;var n=this.setting.scene.material;e.material.name&&t.material.setMaterialEditable(e.material.name);let i=t.material;if(Array.isArray(e.toReplace))for(let t=0;t<e.toReplace.length;t++){let o=e.toReplace[t].toString();i.setMaterialEditable(o),this.function.addAction((()=>{o in n||(n[o]=i.findMaterial(o))}),2)}else i.setMaterialEditable(e.toReplace),this.function.addAction((()=>{e.toReplace in n||(n[e.toReplace]=i.findMaterial(e.toReplace))}),2)},o=e=>{let t,n=[],i=this.setting.scene.triggerStatus;e.nodeTypes&&e.nodeTypes&&Array.isArray(e.nodeTypes)&&e.nodeTypes.length&&(e.name||(e.name=r(e,i)),t=e.type+":"+e.name,i[t]=[],i[t].node=[],this.function.addAction((()=>{if((e.hideAllAfterLast||e.hideAllOnStart)&&i[t].node.push(0),e.hideAllOnStart)e.nodeTypes.forEach((e=>{n.push(e),i[t].node.push(e)})),this.external.node.nodeHide(n),i[t].active=0;else{i[t].node.push(e.nodeTypes[0]);for(let o=1;o<e.nodeTypes.length;o++)n.push(e.nodeTypes[o]),i[t].node.push(e.nodeTypes[o]);this.external.node.nodeHide(n),e.hideAllAfterLast?i[t].active=1:i[t].active=0}}),2))},r=(e,t)=>{let n;if(e.name)console.error("This arr got name.");else{if(n="RamdomName"+Math.floor(1e3*Math.random()),!(e.type+":"+n in t))return n;r(e,t)}};("object"==typeof e||Array.isArray(e))&&n(e)}},sliding:{slideBottom(e,t,n,i){this.slide(e,t,n,"bottom",i)},slideTop(e,t,n,i){this.slide(e,t,n,"top",i)},slideLeft(e,t,n,i){this.slide(e,t,n,"left",i)},slideRight(e,t,n,i){this.slide(e,t,n,"right",i)},slide(e,t,n,i,o){var r;function a(){var n=0;"bottom"==i&&(""==t.style.bottom||"0px"==t.style.bottom?(t.style.bottom=-r+"px",n=0):(t.style.bottom=0,n=1)),"top"==i&&(""==t.style.top||"0px"==t.style.top?(t.style.top=-r+"px",n=0):(t.style.top=0,n=1)),"left"==i&&(""==t.style.left||"0px"==t.style.left?(t.style.left=-r+"px",n=0):(t.style.left=0,n=1)),"right"==i&&(""==t.style.right||"0px"==t.style.right?(t.style.right=-r+"px",n=0):(t.style.right=0,n=1)),e&&(e.dataset.openClose=n?1:0),o&&"function"==typeof o&&o()}function l(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName}"string"==typeof e&&(e=getElement(e)),"string"==typeof t&&(t=getElement(t)),n?"string"==typeof n?r=getElement(n):("number"==typeof n||l(n))&&(r=n):r=t,l(r)&&("bottom"!=i&&"top"!=i||(r=r.offsetHeight),"left"!=i&&"right"!=i||(r=r.offsetWidth)),e?e.addEventListener("click",a):a()}},scrollTo(e,t=0,n=0){e&&(isElement(e)&&"string"!=e||(e=getElement(e))?e.scrollTo(t,n):console.error(`"${arguments.callee.name}" wrong element.`))},addAction(e,t=1,n=5){if("function"==typeof e){var i=this.setting.events,o="windowLoad",r="sceneReady",a="sceneComplete",l=i[o],s=i[r],d=i[a],c=0;(t=1===t||t==o?l:2===t||t==r?s:3===t||t==a?d:null)||console.error('"addAction" error, type only 1 to 3'),"object"!=typeof t[n]&&delete t[n],t[n]&&(c=Object.keys(t[n]).length),t[n]?t[n][c]=e:t[n]={0:e}}else console.error("addAction failed! Callback not a function!")},runActionType(e=1){var t=null,n="windowLoad",i="sceneReady",o="sceneComplete",r=[n,i,o],a=this.setting.events,l=a[n],s=a[i],d=a[o];if(!(t=1===e||e==n?l:2===e||e==i?s:3===e||e==o?d:null))return console.error("Run action failed!"),!1;if(0==e&&"object"==typeof t){for(const[e,n]of Object.entries(t))if(!isNaN(e)&&"object"==typeof n){for(const[e,t]of Object.entries(n))t(),delete n[e];delete t[e]}}else if(e>0&&e<=r.length&&"object"==typeof t)for(const[e,n]of Object.entries(t)){for(const[e,t]of Object.entries(n))t(),delete n[e];delete t[e]}else console.error("Run action somthing wrong!")},addTitle(){var e=this.setting.content.title||void 0;if("object"==typeof e&&null!==e)for(const[t,n]of Object.entries(e))getElement(t)&&(getElement(t).title=n),document.querySelector(t)&&(document.querySelector(t).title=n),delete e.k},addTitleToList(e,t){this.setting.content.title[e.toString()]=t.toString()},arrGotKeyValue:(e,t)=>t in e&&(void 0!==e[t]&&null!==e[t]&&0!==e[t].length),ajxPost(e,t,n=!0,i){if(console.assert(e||t,'Missing first parameter "POST" or "GET" method or second parameter url link.'),!e||!t)return;const o=new XMLHttpRequest;o.onreadystatechange=function(){4==o.readyState&&200==o.status&&i&&"function"==typeof i&&i(this.responseText)},o.open(e,t,n),o.send()},isEditMode(){let e=parent.window.location.pathname,t=window.location.pathname;if(window!==window.top&&t.match(/draft/)&&"editor"==e.replace(t,"").replace("/",""))return 1}},directRunDefault(){let e=this;e.setting.style.defaultType;const t=()=>{let e,t=this.setting.style,n=t.style_1.root;if(t[t.defaultType]&&Object.keys(t[t.defaultType]).length)for(const[i,o]of Object.entries(t[t.defaultType]))o&&Object.keys(o).length&&("root"==i?(e="<style data-css='general-root' type=\"text/css\">:root"+JSON.stringify(n).slice(0,1)+"--"+JSON.stringify(n).slice(1).replace(/\"/g,"").replace(/\, /g,"^").replace(/\,/g,";--").replace(/\^/g,", ").replace(/null/g," ")+"</style>",document.head.insertAdjacentHTML("beforeend",e)):(e=`<style data-css='${i}' type="text/css">${o}</style>`,document.head.insertAdjacentHTML("beforeend",e),delete t[t.defaultType][i]))},n=(t=1)=>{var n=this.setting.style;const i=e=>{for(const[t,o]of Object.entries(e))n.defaultType in this[t][o]&&("function"==typeof this[t][o][n.defaultType]?this[t][o][n.defaultType]():i(o))};!this.setting.widget||t>4||e.setting.widget.forEach(((e,t,o)=>{"object"==typeof e&&null!==e?i(e):"function"==typeof this[e][n.defaultType]?this[e][n.defaultType]():console.error(`'${e}' load faild!`)}))};document.body?window.addEventListener("load",(()=>{t(),this.setting.style.run||n()})):window.addEventListener("DOMContentLoaded",(e=>{t(),this.setting.style.run||n()})),window.addEventListener("load",(()=>{let e=this.function.kd();this.function.runActionType(1),e.onSceneReadyToDisplay((()=>{this.function.runActionType(2)})),e.onSceneLoadComplete((()=>{this.function.runActionType(3),Object.values(this.setting.events).filter((e=>"function"==typeof e)).forEach((e=>e())),Object.values(this.setting.closeUXUI.menuClose).filter((e=>"function"==typeof e)).forEach((e=>e())),this.function.addTitle()})),document.URL.match(/\/draft\/editor/)&&e.play()}),!1)},init(e=1,t=1){if(1==t&&!restrictDomain())return;this.setting.initExclude=["setting","init"];let n,i=this.setting.initExclude;for(let r in this)if(i.indexOf(r)<0&&"object"==typeof this[r]&&null!==this[r])if(this[r].setting=this.setting,this[r].init=this.init,"function"!=r)this[r].function=this.function,this[r].init(0,t+1),this[r].init=null;else if("function"==r&&1==t&&!n){for(let a in this[r])i.indexOf(a)<0&&"object"==typeof this[r][a]&&null!==this[r][a]&&(this[r][a].setting=this[r].setting,this[r][a].function=this[r],this[r][a].init=this[r].init,this[r][a].init(0,t+1),this[r][a].init=null);n=1}if(e){let l=this;l.setting.style.defaultType;function o(e){return"object"==typeof e&&null!==e}this.function.kd=()=>window.hasOwnProperty("WALK")?WALK.getViewer():void 0,function e(t,n=1,i=4){let r=i,a=["parent","init","setting","directRunDefault"];if(!t||n>r)return!1;for(const[i,r]of Object.entries(t))-1==a.indexOf(i)&&(l(r),o(r)&&e(r,n+1));function l(e){"object"==typeof e&&null!==e&&"run"in e&&"function"==typeof e.run&&e.run()}}(l),this.hasOwnProperty("directRunDefault")&&(this.directRunDefault(),delete this.directRunDefault),this.setting._EDIT_MODE=this.function.isEditMode(),this.setting._EDIT_MODE&&(ADMIN=this),this.function.ajxPost("GET",getExtraAssetUrl("kd-cover.json"),!0,(e=>{this.function.scene.kdExtensionsManager(JSON.parse(e).extensions)}))}return this}}.init();KARDIA={View:function(){const e=()=>new WALK.View;"loading"==document.readyState?document.addEventListener("load",e):e()},getViewer:()=>restrictDomain()?(delete this.a,function(t){const n=function(){return i().function.scene.external},i=function(){return e},o=function(){return i().infoPanel};return{menu:{style:function(e){e&&("number"==typeof e?i().menu["menu_style_"+e](1):console.error("Arguments must use number, 1 ~ 2."))},addButton:function(e,t){i().menu.addButton(e,t)}},infoPanel:{content:function(e){!e||"string"!=typeof e&&"object"!=typeof e?console.error('"Info Panel" content format wrong.'):o().content(e)},switchTemplateContent:function(e){o().panelClose(e)},open:function(){o().panelOpen()},close:function(){o().panelClose()}},floatingSocialChat:{info:function(e){i().widget.floatingSocialChat.infoSetting(e)},sample:function(){i().widget.floatingSocialChat.sample()},disable:function(){i().widget.floatingSocialChat.disable()}},nodeHide:function(e){n().node.nodeHide(e)},nodeShow:function(e){n().node.nodeShow(e)},onNodeTypeClicked:function(e,t){n().node.onNodeTypeClicked(e,t)},addAnchor:function(e,t){n().trigger.addAnchor(e,t)},addExtension:function(e,t=0){return n().other.addExtension(e,t)},getExtension:function(e,t){return n().other.getExtension(e,t)},getExtensionConfig:function(){return n().other.getExtensionConfig()},helpVisible:function(e){n().other.helpVisible(e)},getExtraAssetUrl:function(e){n().other.getExtraAssetUrl(e)},onSceneLoadComplete:function(e){n().other.onSceneLoadComplete(e)},onSceneReadyToDisplay:function(e){n().other.onSceneReadyToDisplay(e)},play:function(){n().other.play()},requestFrame:function(e){n().other.requestFrame()},seeItem:function(e){n().other.seeItem(e)},switchToView:function(e,t){n().view.switchToView(e,t)}}}()):void 0}}();